(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{jkDv:function(t,e,n){"use strict";n.r(e),n.d(e,"AdminModule",function(){return kp});var r=n("ofXK"),i=n("fXoL"),o=n("tyNb"),s=n("/t3+"),a=n("bTqV"),u=n("NFeN"),c=n("XhcP"),h=n("MutI"),l=n("FKr1");let f=(()=>{class t{constructor(t){this.router=t,this.loading=!0}ngOnInit(){}logout(){confirm("Keluar aplikasi?")&&(localStorage.removeItem("appToken"),this.router.navigate(["/login"]))}}return t.\u0275fac=function(e){return new(e||t)(i.Ob(o.a))},t.\u0275cmp=i.Ib({type:t,selectors:[["app-admin"]],decls:30,vars:8,consts:[["color","primary",1,"example-header"],["mat-icon-button","",3,"click"],[1,"uk-width-expand"],["mat-button","",3,"click"],[1,"example-container"],["mode","side","opened","",1,"sidenav-left",3,"position","fixedInViewport","fixedTopGap","fixedBottomGap"],["sidenav",""],["routerLink","/admin/dashboard"],["matListIcon",""],["matLine",""],["routerLink","/admin/product"],["mode","side",1,"example-sidenav",3,"position","fixedInViewport","fixedTopGap","fixedBottomGap"],[2,"padding","20px","background-color","rgb(255, 182, 193)"]],template:function(t,e){if(1&t){const t=i.Vb();i.Sb(0),i.Ub(1,"mat-toolbar",0),i.Ub(2,"button",1),i.bc("click",function(){return i.rc(t),i.pc(14).toggle()}),i.Ub(3,"mat-icon"),i.yc(4,"menu"),i.Tb(),i.Tb(),i.Ub(5,"span"),i.yc(6,"ShopaHolic "),i.Tb(),i.Pb(7,"div",2),i.Ub(8,"small"),i.yc(9,":)"),i.Tb(),i.Ub(10,"button",3),i.bc("click",function(){return e.logout()}),i.yc(11,"Logout"),i.Tb(),i.Tb(),i.Ub(12,"mat-sidenav-container",4),i.Ub(13,"mat-sidenav",5,6),i.Ub(15,"mat-nav-list"),i.Ub(16,"mat-list-item",7),i.Ub(17,"mat-icon",8),i.yc(18,"space_dashboard"),i.Tb(),i.Ub(19,"h3",9),i.yc(20,"Information Clothes"),i.Tb(),i.Tb(),i.Ub(21,"mat-list-item",10),i.Ub(22,"mat-icon",8),i.yc(23,"checkroom"),i.Tb(),i.Ub(24,"h3",9),i.yc(25,"List Clothes"),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Pb(26,"mat-sidenav",11,6),i.Ub(28,"mat-sidenav-content",12),i.Pb(29,"router-outlet"),i.Tb(),i.Tb(),i.Rb()}2&t&&(i.Db(13),i.kc("position","start")("fixedInViewport",!0)("fixedTopGap",65)("fixedBottomGap",0),i.Db(13),i.kc("position","end")("fixedInViewport",!0)("fixedTopGap",60)("fixedBottomGap",0))},directives:[s.a,a.a,u.a,c.b,c.a,h.d,h.b,o.b,h.a,l.j,c.c,o.d],styles:[""]}),t})(),d=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Ib({type:t,selectors:[["app-dashboard"]],decls:48,vars:0,consts:[["lang","en"],["charset","utf-8"],["http-equiv","X-UA-Compatible","content","IE=edge"],["name","viewport","content","width=device-width, initial-scale=1"],["name","Description","lang","en","content",""],[1,"row","row--banner"],[1,"row","container-medium","banner-content"],[1,"banner-content__heading"],[1,"row","row--white","row--padding-wide","features"],[1,"row","container-medium"],[1,"row","features__row"],[1,"col-narrow--right","features__bike"],[1,"col-wide"],[1,"features__heading"],["src","data:image/webp;base64,UklGRpY0AABXRUJQVlA4IIo0AADQFAGdASrFAcUBPj0ajEUiISEiofRJYFAHiWlsz5+4rezqo2cuUqGbDNsKZgckn1JguhzA5o4cGa84gbWmNgNQj+lf/D0NfUvsp+U3aSeW/ZD+1fPX5hdmPkU/Ifs3+I/uX7g/4H5tf9e+Efjf83/w35uf4nPDu73+b/wH7v/4z4z/tP739qXoK/yvuA/zD+j/4j+6/ut/df///9fwn/hf7Xy4vvv+3/Yz4Bf5P/RP8h/aPys+SH/Z/yP+q/dL3Z/Q//N/xX5U/YT/L/6t/s/7t/mv2g+cn/6+3f9oP/l7o368/90UNESXJqyLuUcbR1f8HeZYVvp0nWC3QmJUsk2f95j8Lw7by3p0l56IXryHUXZ9QPg2y8znK9H83xlLwYJ2/5LOqIAEjBf0OdSvXs9cIp2CIoR1XrNha418KzqiN8X6KByVpBtttOLQjoZef+FyawNwfaqKuORGrYy3b8oj+jVDtn22/3P8X52y+gZomQ9k6GIpqp4sz9BYpnABUC3of6ohS5Hkqlr8hBRhQVeXWVHTaB8G2Xn/A5/Alwdx6xEOTykJP11q2YjgCmHD4cA0KiyKgVGbBGGZrCFQ2BbcASjnIN2XZoEBnrdmi1M9Q8uPEw/E2T3xQZc9ij43HSXJrUW7/DDHy/FhYTbIURo78QFKzcTUy494Bi7Z02tnlq+gq9cw2h7IyF6Qe2XFyhU5kO4FtiMD4Nsuh9fuOWbagzC5NdEJEX/7Rz2P2L/3wwNGHchYwGUVUYxQWPSvRNnDaEowVAoLHUuelv83vvUD4NSgsehjSj3hR7euEXjC9fhF2XjK6RxgAbDb1merc7kXmktmro0Wl9Ym+5avMKfCtrJqBx8iFUhAX5t8tPVtn1A9tL8Ci0ms4+J6d/Ts40kwhXqfdHotiHI/8lB4RnuHwexfL/VjE6uWh8MdT8wEnBMh2uqGEoGoMxUVp3w/1NRTwvlgl2h5D7b09zwCe2g1bXFvhb0mkk2gcKXeOLPl9xbGrdEk8WejysSm9tp+e09+OQK6IH/dttkDMbEmo4WaO5FcEUWel8g52ZOoaT+pSrsNulhs5SaiFivjrz/g57O1jPGZRvpacqdmxQoB9rAGMwzKKWvgmhM326bjWQjj+Z4OByA4CrwDmXmZUGLUwcmAZbawlJyf2riWyg/HdKYMrKXrspJcma7Orqn38o2XdZ5pnuTVpOEfHK+4iICzB1Xt6R13uqyi0uMJZ5L6HSugJ446AVCTyt/voy9hlcmbfmFxP3AorSeNLvB4Qr1aIOCmJEvefihmHA1KOJqmEfVDYw7MFi+ICR5ZPTt+H4+k9YrDkUuZTTbDc618zgGQIY37AN9CPOX/E/wB7X4WGukvECp6g13CBRHx0hLg2GkDR24basBlmRrIGr0vOTg/TgzU0QlIq2et8B8daZsHaA1u8LDbYhXJpznjNmzhwgcJcAMlJjZk4PmFrzDUurZ04sYYtItXvuaXZ943+yND20cuHhOUZHRTnrfWj5NsrCOqX6uiOlOAe+a+hykWE4NCpkngF0+vPmRC6ctOaRNnkfXh2Ipvm5nnT98eHVAxrU5j1xW9Xqkeo3B/Et6hM0qPsuYkeUJSh1sFpSKDi9FT+cOdTnVkSld+SAJ4GTV8hYDX3KfwZ2cIlhkaq9bgMOfMng+SpFIrafT/WdEc6ZP9BaFO+cQ+YHCmbKduUD7wc/auiHvqAsrFcjHfPjEGlzbADXmYwIF001tEpYwXZx3Q0eETmyuw+UNjYPanofaoTxELVO7SbQTl0+JHmgGi5wT5EYzi8OC7QuBcDtnvqxPmElUTD3fXnAlAKqZ+g8Kr5p5S6Myt+0W1W5j9ICR/eJs13UQNFCqMp3TfVoH6/zQSswemAfud0Jr0FKsmazdfcwPdUqwTOsIzghz41TmcOAvDPwKujfDwODgCnMk26F9iA1nKaullAySTIJraOyPcaof8CcK9XjgWyZUeIvfH1X47ANZeI+JdaOQ7zVoDM4QSuiezlT7Nrmyj9aZcyxDkQ+/3NjCkvtqXWKZRMcn3UW4+hDsLMDIya1m+QK3fA9qmAI/rdGI9lMtPJYmZoXV5D17FZu8i4WQ8BWk3QG+Zwh075Xcbk+ssDGDIiP0LYAyKZCA7yS+lBOyEzDD2lEnEst6pt5mWXFOLrEoTcvb04iQD19LmfYxDRG+WwFLbN7cuN6jlpHYufK2XMBqhfT0WSiQZJuMZo6cMCKyXD536ZZUadd/8bwkCDygZAv/qLMC/fsZctyXYXEKD8+n/3WK2S6gGhFDJDiq2u6e8ejfWX9pEZB1x9rG8oIYWN68EchOg6xVOAUnPKRlP1qhwZzkcyYY/mtfRf9XB439mIZa1w9Ocv3xPgn4VCDclbArdlov+u7jkg3yLtAsPU9S89Oo6ulWG8ufmQnBqTImR0d514xdDq24G+vXvAqQPdzqpQc4jWkUSsHkYZdbYrKnv/6AHaaw6A12CnlQRTH9qBMmUvqAivA8ixATcSp8qlX866sYpUtIpN8hiv9WAFUpdHDSF2iJSYssifPYzp9xTlgpa/3jdkF0NerFxyNwaBOB5UUM7qBB5Fsy8bf1mPmW+AiXB5fnFYojPmqk8EEFpFLXKLdgyzOus2nxg6c/txwGbi/louh9icYnG+k0iS9i5459IwNKDm601YeJPcMxWnfW5mK6rt1Q9UV6lIBc0yz9JMKb9mvVG9nG3wR3f/5bA+nqY/hOv+QT9wVS2+GxbE/dAaSA3AMKmP2PlN10OWfqOVJ2TIz8mHgpSTyX9LJTDPjT2t+KX/lrAC67hY1zB19UPySDkTuedCuLCp+lwDinurBbo9jMevo4X3rhVoN6qvVfPgl2n4FhPHkVkwuRZft1KiRJMivShccWGQDo6fSHio0EtGV4ComMWlzHJSTliTyD8fVOXIvmOXmYuCfbFGQS7oR7Ng8HcxucG2Xn/hcmoXyFDLoAA/vaDwAAACiIIHc2RMLiny1Hc2NU4Df4XK9r9Zt/hF/memAzt1ett4NiUZWEwpQxD1O2cjldKBxaiL3McguKtquHkUx8KDB2iruQkggW5KWy3/w1oopBgYfhNiSVxFRDej4+puzMpXUQG5uEAHcw4F8e0EyE+Xdpy/Q0lBx5Tk9O21VpbN0gWOESGCVsKNt5eGRBg33rK9KMBNMEKUbjb59soWlhDp68VS8UvD8omw6UNj+TVyB/ogOMYtBT3gViJW4ySZKH/Wyitk4I7oBhnKqufn6vTgXls8zK6RVzgYEX53q7JsdqNfk5A5ezBRRSYgUUUYMMiVabj8d3XvuRteOPxSMKDY1P/iAYr1gAAAAAAANQcYlOYomZHedZNHdLKkBIavd1y677qFeocYXzziXJhvIb25hdH2iM5YRJiwTac0w3QRXOKNtdU8f/D9GOZYA7o75I1ASVJVUlaXFeH0GxifY6N/Kh+i+wXjYc5KJl/nW8n7Et8btJglwrJPcHm0wiF/odobxg/cSKk6luoov+33ePK5D6EklDTl5W5tepQyVvzDaBzdNoPAXgLVZ3MWdvBYB+8rTgs1nrwNj/SPCfI8Uu8aZezMen2DVZXsojAw8Jry4wf/wYfVkZOTNa9x8Oz9rylRPsrgjBCcIkIEzEjJceS4pfrlZHrgottoSKshHNO9t/9idCfHTaDjGzTeb+oqkE0gS1iCVG87RAyqLXc4YfJVb/PD9KAs2d8RozD2vl43dQW0zNu/V7EjyzmI7Eup/1v6/buNg3P7JL5NWQ6jvRKPLLirCMLj7+l8HVe4AAAAABENnPUoejh89Ru0/Ltlmy9EnGLAtVWSlVuXIndwqMFQRr2IJSlUFHJ/tYCz0SD5JKrzU9+4XkgcZ3wJm4bS22+/j8u97m+71w8JPiARwrwM6oQxu3qdCZV5WWTj2mJYfpiZIE+lTZfJDmCUeQXlmjzecrq5VPmfGFpe2ck0nZ3IRDKVM4C/84A3SpX+X/zBIzY0fXu8x0RRAvdrZK1jr0B4VrSEdyen5itr9+fUqZ2iJ5sInVkrJdPn/PEO3NxXipsbCrb1hHnrJeBRX9fXh8sWYoT2HaV10K7oxAcNiIx4asQXDO+sRyJB3dG+fLZdVpwa7PZBMguY/0IvGOekCBEBJmezIdKWbmtGP/WFqDQEY4e6R1CWSSgmiEz5+IpVamIs91ref8BknVBI49r/pHQVYq8XBB35dYTIF87gqomulpTYTB61a8TUbPhGfhVTY1PtjmImyRj+9rttYuJe1moD+jkgvBm0wAp6l++yOQlJKSbIv4vIYm13vVdJ6Vu5aRqfBWssrkV8TYWNyuJfXYurHdZLMgTBC0kn3e2S/Xh098ptHL+/YVeD4b7DPLl1s/g0tSoqqMkXtZuz4ypwmpj7c98APPLPoWzYC+H503QthBpl8BBVd8ucu+aQ3ZUkzdI1z1VFoL6x8rbVAAAADH9OgXgVJM6sQxmUKXLtF3tlBQZFvlFojyXac7se1Sv/2GmV+bSslHtTCC5U77sEDQLOce4VPCV1AR/tSScFpkHJ1IXY4hNPTzdB4FeJagW7EN39oH8Lv9AFOR96SmpoRCa35altGgph+wdhwb/pfbpctxFjwnO1BAMRhOKhl4g8qLtIpGJWz3TUi/O9wfGWm1PBkG5oIMkRTDLCWhcZ24j+jbZyYqZ9/+UzOLWEvbpjyWwiJ0L5BAcH9hvwxrN5PerSt4/rOukR01vw+2gu9W0ENW6T7Nc/PWE8G4OabcRHziHVFoE0z0i0/AwGOqYMy5gFc4BHu5f4jvAguN0XtUnnMgAGCxzIpX/0d5CxWo3l86wdMwBPh68wDjPKAGtB8RjpoDEJ0X40AJDNi64BhOnEUYMPX0uzbGHkashf8JKzzNpzxdM74nTHaHZY2ruC8pvgjHTSx43ZWE6RYKoq9ohqxFGMIBO0krO9h0470n6XALIaYMXiaz23AAABJeqZuHuhzqaw543dOYEwbHDGqQk9ODGxb86DgyBQRJ/kbzblxD0VCRT+KtXut/nVAFXPQJX309/QpafuHbuQsVqo0IdbrK964XcpEKHr863P0xT5safHvQYNQu8ONFIiSrq1Mqf1GsjzTe/fE1reRXKb8ISOrRolJymFxDuXJuvV+QEzI0B9fta6JiPsvC1zEQMTHOrvDZu6Sm/9FA3+z12pDIbUUI69tHB5TyxQjxHaSM58sUO+AwVcSKU5yA5LK0yyqDWHLBpSYLNnqK0AGDhgYOl4wWHSMEmCXWUQfi1eIYpHX7jYMoU3afMHyUCt8dJ8PuYTV4zGnr38E9fQNcj5fsFgS/RrC6xM/MAdfwoNAtffMome6xmNpSrabdZ2G1usAABDhk719p25nfheh/mnNL9lalWCiDBRpKtGbdRaoGJrVUZ0kiUyCi/zmW5dbDCmuGMCANzraqHXe14bAxFIj8PzhAejZU0dRtgSczOL7RMAhTMp6wE4t9k/QSBO7qNjozmq+kqZIP6R+ry3MnVfAEKpO/OAOIOqd0rDiJtgCPT9BvlGGuMaPiNwFIIFyzwQOKw14G2/0R3d0hwfLo4+n8BBn8/FgmwE647fTqhUkQqVj+3UZtPtZG70+ji9QvzttonPXvlzl49Y5whLJkPVpGVEOAcfyZqFHP3aBLukeD9/sNj8y1qFigAADmW9dQ+rnV3tGsTjbzHC+DN0lCs8f274OoYX1hVgWUYAQ00MckSOKBUKXnweUIPSuM72bSHCOoFaB2+NLGZyDqrkPYlB9qYeYc3CYx4ZcVHAP4jctSNYn3c69SY92FuaA4y5lF573JHyfVyLwDJUQY4pFUMljG7LWP/XZcO3ptf4AditeWt4KEqWL98X8thH5InV79wJIWHgbZSW1PtODVv/D3yWasyizDapmkVUcRn1GaVNeM2CgS7DgFP6T8MIdfIL6dByKWYyRQ0VekxLQFMBSxCVxa3uLpGR31HgNpx2dJ5Hvv3uLU/9U/aA3PYqEPogG1a6xA6Bxe3EFGHSBHGsoahuy+QBeUuyYe/sQh4KPafaG7yWu1IOhMcR8/vipXaOP+NY/wBmEmV2y4shW5tVTPDGcWi1s60ZMCf7voKLwnOtK9Q6TbyzABmooph6v8o6WKrse8mJAJdICbT7EDipHT9BRSK4upY48sjLz9QPdsUx6rVzuigSHE9p7equEaWY+uoR0lDAvafIwfcYVz0o9vZf9egACWHo60DN831hU8xdgmDLJZk1Fkg0E8s2oUac8rSZ4MfwXcdhHOODbQuKxZm483gCn1YfBe3PZZf7kQoi++hXGxSzW0Q3Vj9CpMsUyzwDmebRSy6r/H9hLTGEmThEqru11cUnMWhVjceEPYYmIK1s3WJugOoxA+9yOSgJY/mxYbjWYE0rnSsZfsAIM5flz/f5sMVXahgXnGhemdNeZgtJqxx/mzk59s712B5ZhAUbaSFhD7QbvPi/XfuOdVqfvgCopLrsMOEJtpTjNMyHiySxZv6RHVtZuOtO2+/NIbiBxvekeLSGKFyLWpt0t0dD2/pWShR2h8QO35fpYZm6jPbAS487ReIP3X3hCmvYTkMN+gEawu1634rYTM+g2LH76OgkiSh+rmi/lpv5jPRFxUNr4Y8SRgi9qsaa4tjPP8cR0sw15PpEDzqX0WwuOuNyY3ZtpUUyFaUXDlPaeQfMA/AImGj2WxFSqJOgff76i3O//vGkc/3N3Cu+9QzzAltSNQpkyFZ607pb9yPSvRtcrVC8+iE0/MQbZRbZfZ9DQpuTvLriOcfJXsDaZ1ZRbSOqVuHWQLk9mSql8aw3kY5afhDQdF8/6rvrW0WvQ2ie6e908NfIr4oGp2xWywlHSAVnCvdOAFV56ylPSkJbaXDrpytDRPxHY4jLO9X8jz2f3XqqCCgeUnfL4AzBQUw5Q4prUUi8JW0aZfBxS9eSWLou5KqMyHQWajmR3bbpfT061vOkPWQKVkuhTUiE4axVBg6WFyA2Blq2perBG/aoI9FzTBb+LnK+/psRqdPzVkAugZ+exI1ev7y5+LzrZIuthx4XtOl/uB5xzYKhaYc8IrBSM4e+5oAAAbmB4jdurPQ9FpIzCi1Qgw+sLo/AAtFFJ6fUIQ+TAwt27vTHPBgWHsFaLo79e/KIvZt1oZEKIsjbYsT1EetH9/AKaWEGrOI0psGU3vKahw3ZyNBt7ojajmvGwM5lFvQSbSJr358AhNcDo4K+1r48Ywexm5t7gqFBxJMYWXVyOM0L9LKcSy5K7SszRQ/EGzqDSn+Z43gI472b+W33J2+SU/M2lz2NJ2wuREBwKVur+CkCYio0TvvYERLgZ3/x/jIr80Pfq9LQj7MZdbU50nQGL5LYthgRS/Mi/Zgevhz/Acn8TPfI6pyRDRVEuLoXqP8ZST4Cw+sLn7e8L+bKvZMpR9rbOuJY+XfkI7pyK++mxEdlc0LJSSaeUCowPp9S0lsaxkVDrVELxEsQ4297xm4aqrQzeXH6WJFoPb/Sy185xZagln2fNmWnGx/690mHhIWi5L+JfOXz/DSKVmfczTmG/0Gxjlvf2+OP418sNY/ZeXTX3JAhNuqSUGLnKhp97pD5gldSWtGtonaaaujoMWmWYD47YxwUK/wOYqddiPkkCaawdj0ZGJIumwHFvKUIOKa8M9KX7RST3fzdS7QoUjsJxx9Yowx3UBgu+D+3o6l6zrJOjQnEI95eHI6vWp82P/9UJL4CzFefpyFpoc32TMGJb8yTzrSonFVi5T2+lq9rXZNfjko2Oux53gYrMCqrYCgsrpyWnTd7qu9p4vkcmC1+2tgAButo2cuCHtsZsmRn8XGDxkN1NMtPrTZAg3rG7K5Id60K5jgyh/m9Jfoxe0utCRcOUmeCWUZLb8oJNNypeTLf08Ex7AtUkmpn+b14OwnJtrmSDpddrxe27SJguEs3QKXha8GL28CZpTVoluC46syuMpjiBEGCqsYt6w5BAKpWpoAB1LexYwbElY4olDVMeBYLszbuvTKPflxe5dqAnFXxahzTE5mQv9/NLOjL/Lg44S1YvUq/o/FUo5xfd1hTOdydTlsBumsz1MRNKBOKYhxpsaEA8PedRtScUxROgrTAxtLWX5G7WXb9UVbsqtHsZgqXYC2MHsWrXnCuZffjmkg/Xi/CIOu1/1gHW34itSo48l3o5b2xBRH4dlcXq/BeZS4UzmVCs7579MFHxsMqzkZSxosIE+QzZLSbAXMTE2GHb7G3mbgOV/gnxJ8YYBm09KnyGsNZKfUGJPw1lAh2NRAUtJP1j97uPT72aZGm5ggUlKGRJ+OQPDcqcsg7zIHEe3wsVXCNiBNCEsDS5saf5nnuMVYf1Y7f5Jc3YoonF5c3SqnzlpVXRtcCo13m37HO0Ffmfk2mrC/2g3RpXa9r+fDf/QkoWqXPpSAkh73+3NaP+dUJBY0by/d+8ReQW/+VufNWYzMyS/hOneqP594RJvV6WCevH2Hm+lnyhXxb/7oVfo14IDorFtALLD2Pr8yGCgqakd9lpsMWDLQWM+xYc+sfMQnB2E2OwiTn7zwVriXC8LCT5ofg17UD2HIf0mlYRCjyHmric1BVshqxTzHFSM4gBtLAtAwQTfrku4g/MscEtC26H/b522fejO6cXcB/WtU8PP+b3NelG3jJbDj+hcp0WnAiVeWvN0ydrPJPq7yfeeCTq3LBPxGiG68/RiEKxTN8AvANeRjnX4aMIn1qsycgSInPPMRlh5O12dKBGdgKF5nPIamt1nQQu2By1yZwVofZL2ZRLdldT247RcF/r3wzEyOZTv9Kkhvke6LctDhR88GnhEKfCyLllaQ9/IJVtQf7tf47AEs3IMlWWG3ip/2WKbRw5AcAALchr3wxbVdqeBTbjAGAdamtaRjP2+5+fXEnWNdMkLbKaqLRwzjYY4t3l0iPJXxtxxlEs/J1vsCLqPcCS7AGZydfqoyIleSACLRylApRrX4j5IVIipFIMZnc5cBE/nlGOCLf1bmolejn5ElAr4wdBSHDdEZDCKjd5YjnCdDR2uWGW3o723vIsm5IAv3URj1/b3GzEy0LuVPs429MHWHyiE6QjHqJ+eQF4z8Vd9JPjndg84oefy/n00h4oKyr2gRfqe6+nP19m+3x+D4QmkPJru74nqeCRJtQ8glwo0kVizQhyzvxnfGSb7MVhqGRPoWo2yGmh7guS1NzvkuL5tCwlU7fhfZeIcuWt+uv9DD7uYx5D6vUa/YO3OlHD+0guGbWGKTHKn8RnzZdjEK9kprlcDcH5ik5FIH84fY55daBceXqqfgoBPI+w9LZjw6YX1qjrJ4vQ7tQaCp2mZw6Hw3b/c5R8FCfCcsEiousJrG+iIxbZ5O7eARjLIskM3oYv1Iai+FGctHWqz43TCqqLMRyn7zQYVVuWQERCnwv1G3384xwn3pNzq+l5aRsBo+jQTGdk5hzlUeDNaRw6vNuR7EgmDVCKq89Isbn9WY7L30i9AMGgn5hZLVCc+2jKs0TfJwaWg4cOyU03tniSFeuzJ7kljMtHHhQwtQSRtujC0ahaNK4OZhdpFpQamHbVEKQNKbhmSQvKnUNtf4r4E5c02b1khVc7d/5hy9f8/bzavgbqiia7XGS5cWV6hWQc8zDY7GchWDIxsmPByRByKMSl3JJpeIdJHcw1QKH6r2n5B08Cbr0OE/p4WLtu90LhPds31eEOf1NktipL9gCKCFG4uhvO+n8KfHnQmyTFZOBX1aIU9NXFGbtPpEW2N8UtQvk1vTEq5IL0hm/f944d9JM9yuYg9dwOEzF+A4Rr8FSjMg9gwMaHZqkLbvu+3Nl9Bodj8SMdaLavlslWhtJWXFDJ8itBUuLWlDMryXPKvd1BLhlHbeesXYB2pCQzOw2XNMxI5lXyDJv2T1khLzwGgnokNtsGYhXFNA6DOu7wMCf9cdyzQ7T47fiWyFpm9GAKThklJmeUPaDFieq/ceQewXwkX5uyw5TXBD9rvsR1R68qvmRghFq+ZWV+4wrg+8TdO2hBiYjAFONiqhz0WwGl15WuljiOliidX9YyFILcwkrsZhYXYsSjX2iK5zJ0t8kP+WTm1z8W5Hlp51K+rXmyLv3AcyP24w9vc4kSMHnbiR7+whHsP0sXX/5g6L3B/AIwhIFV86hyJhdfF1JKPctm3Os9KmU+qp0sPDc1NbVsy5ejLjQcoLKE6CzBOUQ3lVsRnVay23UiTIQgjLmHUEBzKHgOdXJpQTNHGPVCFdXFRzJV2Em/xkkPDA80XjodI88kWM8qhLT1H+pD+AHLo+yzaFePjZuba42IPWNDPSxOG3/OBnL7G9s7OzYxkCrXQZOuH+Cf4C7aIDimZ+BPW3em0boAP1k9AumJoPOEcRSbpF0F+XCGS3xDojBOJeZx4QDI4kfdwjUytYJs0vcD6y3Mi5BNZRphkoHF65JWMf9PXmCXfoZhI6epWnomjRWTMmkZbR8fSp/haMbuOfZ0VnA0cumaD6Vq/GerO8gW9Rn8pSjLzYXBKs9UBGg9v/M8O2R0OsXjFoHOt1N2NIZbkAxyHB/4M/Qu6CR+9KblTEiXIg3LIBtk3/YBqughXz5UyuB1NSeyi7mw6PfPa7qQd249Iuz88vusZCijThylgUjLJxVP4AjelAPLPYun1KOP7mbyBMkqeGd7TC8FXw6ImkUP+C80mrF5p8OAjSvANvd3mHD7QLXakHNePylSr/OllMQktyRrBDLPJxVOyOBb/VUQ0wlRHto9j8jXHAmanFXhqFpXT6swhcXz3t+REqFagC1ZtluPTOlpEevP4oAiExkFlUR9aTzgTAaCtsd8q0UKAcTU6RfkDz9Ah299dqh7m1oag2hTJJBfFwKgCr5Y4MWIEzZoC3u7Odf+6ix9yA7eZJL2xdaucAsLRZlogkGZAI3N69nISpVMdpHJA+HXJcFmFZ8k917GE8v6xJHc45q+EYjZX34uMIXROD7e+W028vmkOXbm0YE6gvtyDHpoquDdTf1EdLN8jg4HTvPJMl36rknKeoavCR2cLn/V4qccpt4B4IfiOF0kpiPFk1WIt7Z4OoZPTusH2lDeHWntfcQShE7NQHXpwfqP56rY+GdOqrFbIuXfLJM90DvvWB/OSyeAxc4ti7/0rVbNX6vO6j12tEywYd/rCAu7BZBx/IcU5cg9MRFzObsHYLFOchTA5SkUkk+Xa9pSR/0DaJKfeJHOumvGrJw0HpBF7v1zN34NRP47K8Hg6c/3T0grCf7TvEIRFPc3/RXo2EQyzqzEejD9nORiIy1VnVtVMPXv/Mq25HBp/uNqUZZYTT8tRdEOk34KUdya9EdI3jUdcJFwlO+sfRXpi72hqcFGdYJ5WsKZmnIHrZx8oXFrHRsOt0gTbYsC7GNnocvDM0pSTrllS7TyZn6oeVGTmIoLoVhENZUCnh0lY95Rn3Vf1eiD/IHqv+vrrd9pXjG+aYVnABmo9XBnaGNkR6u+652PUAqxldy4XsAVlPEzC+cFtJn1YOrTFBZCj/yRza7C5K2/uKJbTEVdgIscg2APp9kOjSeHMNCr+/CcXP1s8kgQmpLf7hjL1ofOJiZoShxnA3D8UkOE8waTIW0eqfk+GblnPMX5SE52ofTrJmfaheNZivhnUiRIin1hmTAY6xMYfr39vXCm4hRucn0wL1GvacQgUTfNJ56PgJjLYU3g+glkGvyC5KGA+nGi3vSK4G7BDmaeDUosPnH4wX6GeGJmke6SNR4VYFc0Kuy/J5tJ9zBKCTW70QCfG1KZuGlePaY/3Z57bDBmWmzETrplsirI4ce/6ejZ9stYZTLVSJJBaIKhE1HO95xgERa8ZcLU1hYgtf5PcUSzDMRNgSX7HYOiFF5HlC1Nom8L22cKIGyjczl4Vgn76mM1WS7T3alYC5pPBLkeKLer9D8gI/gGYesZbWqMZMH1w8P16u+ycvuV8pkX/O/Gbbu1nH39M8nxOQbv2pRpaYef3kxF/nl4q3FjxJSxG/KytZiJoAE1UOiEjZJngidfdBQPEP2UWfdcfyEUMuE74cifWECo9bFgQIcKNt0bc4xZQWgSVlHc5pZDOGbCWigV7COjAAPuhYUuxfhIFOCombNLypPLg6LiD3lTDiR+Nbm1UfOr6vJZ2CdCSaiOZxIfL5uB4uYEqFJEXGfnodGY6f4qPoYxRsdmmuEV6uUOozSfpMrberrnmVrZfSbcZA0W9vIOvYgrJTLWTB+NLaEQCQEz4XFLWH4zCG5BsNTjELVRf/0SXCFZ/7Oure84CqQkt/GODjkxlQgvhzRfpbZMAX3Mi3VlCeBKBSDM7BEa8+s8WLEM+UpcrA9XUQnsCJg/NDapFDWNsp+X2qnAvBarCwdM2VZ86r9hz9+Wy9p22mnIyrh2h2Zt/yfzjVdMxC5dXIMWUsbx0ia27ugj6YEp4syOm2Wc/CmDUtNqH2mN8T1YeVgyLSBVLzN4zUHGSlHimcX6FOxYknihq+VSkr00OgbSlpLRcYdQjwD1bllU1fbO/TAknzrQo+BllEuDmKFZz7h0tNW9PbvY5nVLq8DHkahoCc+NtoWngAqcN1NO6K8522uQs7XbI32ka6seRw5uZjKaJ7oqKff3UY/z3oAIsEakw/jPzEh7da4tWePJguTAPdhGjEy7Bb6e66Nsc8/k0B7jBXso5n+Rj63D+RXri5e3pK4T7+1/30fgRERNBusZ5aCwmUot8OhVXhS2345zKvJW1K958EPeYH6btWOQgUAxK+THK+rRIobhaMco4Fa1plSNkQ8aq11vEVxh5iiEDjnunPu/iIh+8oJorWhgJliG9r6/aasmVbsBHPYY+25QH12WKDpA4HAXfZfSSxgRftHYIh611K3lEnR4JiXx1FotNU7g7165HRJcsNFWRyVqzVeUttQxTR0/qxV+yOL/4Pc2DVWbTnNA0kfUc9MfJxPIYghmADiqwAvMY1FN3S15x1yap3gLQQj3cLT7dualZYJxAJySukAiGIdt0cadXn11yMg0+twLEtAELMO7hjEyvjkdej/5v1+trTCuhw2C12pXEnlr3ciszAK2hisoBY5co1BDhagwthvJFkq74R6J4IfMtSgBQF60wGKb8XSpAlcsmQvHShoNzaxCZhosVcWlLVxlcBzmW+8WclBxdc2axI9SO8i2gQs0hJa9MOOJ4r+WX7SF2YhdZmH3fsuySVcnC9Oc3IPnXD0wAaZcp7lP/DE18r0rhCFWEDSJPKQcR0DVsTpjtbJAeKwK498It6pComa7HGb5BZ9mI4etnqc8ODZlTSzRC8b0iNQseuiToJzl7yz+Tgj5WwmXlAsT/p253p+qbFjdi1mQLlEErpyLkpX1y9KWiYgTF/bP3VFJLuPZPyWDIBAmoAd1m4oqAkiOaD99ZC5gyFjr0O3e4OVCyqQPaq92O+jbbmLtflqV5u21/EV+l4JYDNiyg5L0g+gF+kVq4dYW14DhhJvrlK4yOPssJqe5swftRxRw4YG5Phy9iS5YanI3efRP4Ro3H4SR0DU7gAaLcYbLbzSdqKHlgbRairdblXMDng3CojLIogLnqj5YQT3i2qzSjYDj28WfP7wbCjUs6ikAVqd28OUftRTIDl95xjujWD2GElFmuvKWWARvvXu6qmtd4c4xQqfNE9QNCcRs65yoU+wgkGWhPi1WMXZgDpxAMOEZzttAmQYWb2r7ShrF7BVMihoaDWB6QaViXJQ41Vep2c/CAKVew+qi7no9ptjWzVJftOymeCB9L989cGu6x+NUY5TTe6NYisSCdogvLzp/MbXIc90InES3RJWMcskxl7eMlzOG4kRuszF/e3Y/3SBEDsktAikWWNctquEhJ07HltPmpjB6X+gabPoTDdVo0rV7u6t7GCpXiHp84c7EXo/eydFGInD7VtdkVJEf7jdoSf/DXdHIHK12T40/VX4QjVpnhU/Lh/YxsUPSYo2R6TzJ9lT3xbyCHqc/YZCULy5Zjqx1ZMB1K2eZwLDFDlF6Ihu5dQCptKA3V6yPW7GxqaexDfFqZQ2sSddebTjrFzGOcNikcpnBu0vwcascOvt0uVagBD4HART+5KQf5z7HBt9qrTGEe6CvS/0ETVoSGpzW6L/Zspe7y0lhUrGfcuURHo4tQ+yi/EVh27suLiE0+gc2v5ro+ujfj4CsGmzXHboaxnCVc+prGLGFBgqRTZMGCDi+TnvzYGAKtC3qAjOH9MmM7UOT3Jmt1y7pwldA4m3jVmKdn9jsIlBBFHSq0X5NRHqjvMxrDxOGJbjhARD0TS7vvF2Z7lGCcdQYJ3215E2je4VSohigSoKdRLDkD3d9/D4+1H4NLc4awGnvz/pal6Qe0ebBLidoN5YzHe3JrMSF0EpgEXig9MckGvqURuIYWt5RbV8IncgARfaKUa/47g4zOngHu6c2fpviczAkDpvWM2Nhj8W80l434FS0x4m6WmpNtJiNR+5HbM2KTeooP+MiOKxn5AKVglOf/wXYgdBnkqANMxkyB4ogXwO94DlFolOxlav5I76A6MpnYkMYPMVEDFdhM36GVmwGnC9Acql2FgtdbMqGvFI0tdAiaBIWj2j5YDS1vwKDNL8M/wm5b3CJcJol5eBcnf933+SmNWCAxu9pSkVOIGLAfjhGfuctPNS1kVB3yRJbIwcCmVj5OoJRi7Lv0oqrI8mrkGMwDpXAnoymadzN1x5k8KFtYtkZNS+A1VztbmpcngsIyppqFISgRaSjKNuE0dj/Okw87ra61Y/eK0AB2kcmHVYKQR8VaIceIR2WvMHO/bkryNWnE6oGVgICb7kFHOFSyF9zMKS4kT5tjjq1PcvHGhdIAMSxWhTLtG6lZ4VQTZqGXwoZc/yoIfyfXY04l/tzeHBrOGH5PlLv0cVqDoO/qnyvhQTfIHFUcMWh8EtJrGK3+lr9NVYYzpDbN4TmCdHPgWtWbkQcNRxOSXeT1haLiIaxIhiqliScOemN/owyLLBh8Fl0l53FPN10KWp0LUq372QWx1cJQjegUxtrc5HBQOGJoclDT8PfTGIhp0LpPaTkHah/+LncrLhaAD4LBWEXXXVMW9h74PcErzH//PU4HDfp6ALzAw0OBORwnBvxRQ0Hu+dxfkWXyxsKDTTB9+ucytlijGOD7dNljJTZ63iMfj8WzILxuWCS2I0B53vf++9SpYAVFy+vUeR11zdgzMa3OYCW6bjkk+h+jrPQV6qZudslNb64CgJ5PF+NW691J/X+SaZPABfhgbBwS/TRu9VVjA+F7xRRwh+eB/rhEDbJ1gyLlXFYF5DXasM8pZYPF9lBx/pVvXEEIlG0QVR4f3iTIpshrK6qrHwS9+MgzivIpvN8YAaXwLQoCPWDelJ77EkjqWBCHmZQC2ZJo8UdT+EbCpw5k7gUhXnnU09aVAlh9bQnylpM1UJ4yj3nDZn8zJ1VuBm+UtrGraUCQ/Ovl73/nK7SXsZBZ7OKuHUDLkbLi+4MvQYFrIzIXyEXSthzOTcOSfwuCrpHmdrVhKvsvtGIQ41yID9rgx47X/4Wby6j/ZH49J+vzxJ5uXhcZOLvwxHGoTishIKgmq0N0XHD41uVYIlB+m//RksO+zsZoiO0FKkT7Sm/N0mahoahBbob1hLx7oQTbRByVhp7gYOfwacVicwOTXquoGkQX138IB8XtwhpMxjvHD2Umvp3BzDFAGVxsamtLozvMGyDFF5U2sWdsnmDRA0VDQ22n0k784z1X9n52LjXqlZsbYpKy+xEeOyD1YI+3V5gbNS3WSGc/UuPE8aF5DRsKSHx6K9f1foj/ol4NCeerJn1KE1yakbPs/fiKCDMJfs/u8sWoDVvMhQsjli1tszH2ipE9Cim6iExZbvfq5iX+nQLmCqi8iNIjajWk6XVdCPlmRP2l5atjC4aHqMAVHo43vqJ7T4QCGQfx/uija5wMwKaiUD+D6Mm+ZYHEpSp2vj72kr11jfqSPkaMWb/l7qEhfXbrsil37S1kEtXdyiuWI7q0kvqwP1+gmVZN7SQTkZr4u9j4p8ud0/Es4dSlfyuaOoDo6r29cUHotRJ0yO9C/Yrd6SmQsVmnxZfchuW1neyIgwnJ9agD3YMWjXp27sO0A2esWHHQfHB1nmfFLBRxPLuj2PgCPeesgc53YBXM4DmW7mMDIimepS2sscJTUDjxz7c31fzUd8CRDVVT3uA3QW7qEIDCchYciTlKdZaPmy+bje9XyYhrvtFjBYebyQnzfgRn9cg0knEIV/UKLfkF1ASC6VcQF0FD8b/gp5fntd9oy2cY7w1u/aypLxsfuOGAypPQv6h9ICXznj5bZsH16rdsNm/0rx+qNqA7OSVpVWptrwrO7L0E1C0wSc43wDrqHT3gidBZrs5Aw10sIbnhlKwu68lQO7hHHlbPNU8JcVz+ET5JJVKXKfL2RldN1/JnyV64V0ol/e99XWKna5GDLidZeQhO/i3nYDrxYB73VxnG/qpLqlTLG5sSt6ExzneVvhh3eksBtDnC/a1aSvh90T9WStBSfWNRRf3pxKk37xMMVrnARiW6vFm7wQPo1oT7yk0+9/QjGUqssTA0z5LpILoBM3E2Ziv5Aok58ztTpS6Lfw0gzEiaUJUllGhcaef+GLzYgd2J3ZjLd6S2uEPZbFoLLcQfoidJNqJeaNgaesyjw5ZVJz/HWRJfA2iv4/GAXHlZ5mU4cemFqkXTCosDyvKDIXhhC9+6puX9+CV3ZozBllSnBGQHpR6UGVtFVTfskd3t7pa4RMZK6NcOOJzA3m5Gw1iP78y7jlSB2lb1VYwwBNvDhifHU3X9pUk4Phy9tK3Y1lD9y14PHh47J04Wd189zBNAvgwFwB2wqw7dr3s0sp+5vhvkN2i+UxCP/zw0Oc0nvPjC7AEu1B+eoSmqJyLc/v2fpHc4BktsdtNZbcCw2DfYyCUkELppEnshblwlV9LmmSof99gXsYrhEXzJcSFrL5OMbzDdfTvSIJxo+bABbkUgdmDuT8Vu4EuYiMlFwgpTUKW/yNUn1eeqTixUPRF91Te0blU8sSUwHpadKPlqJ3pWp5xTaYfiEtw7UJCeV4fb7HOumEjEzEhlMsfwaQSLbkzoIX8HWPZ7BIzuG2fceoXhL1u+jxfnZmrHeG5RNBGRP1RSSjshGTBHgnskAum4s97dKOS0j85sW7P+P6dLHYQfHeJkP6ijhjtMLEOquCHSnOitSQp2vaOSV8bQCZbavwh7fHaj3Mfd0+jy6lV30ZHK3nMac2QgAHKLhoUfO1+976sGU+JKOCdr3F56aC6VixR41bII+bHLPr12SawnCsjTEQv41qFRBHrf/8Z8NzDFbujiXV6FeSDe0rFRR+JbT3lHrl+2VMUktFPmkxr1vz0WpcLHSf5VPB07+ku3mdSbAjNdN9hMvPwpxy+kWPtSoks1wo3jOchnvFIwTvXzwU57BNI1lfmSq2KMiEHwWp836nN/7DVaVwm+sDaNJfFsKG9y3nDJgxK8iuW1XVcYG8Em5T2tbDGaMuYPejs3wheU4/cxLcfF6FOeQ+o/044sp3crHj7xN8ZWYe29SZk8jvj7pc/KdfMrK/HfV7hiICYYSAUbg4FiOdmCZC/4iw3HEKJvv4P+1hgW1LLPi35EhsFlS+Y6Dj7NYGZlNvOdG+pSrSWjNHOVM9MsXL1wR8SH7YxAAAAAAEp0uFLa2MiUM57we6GOhqCJ3Lb/xnK8RuN08CuLAW9CICsJ/R+K4tDqJ9Cjhe1GRiImVWD9LSmC3SKJT+slZjguv0OOdiLQGNEnF4UwACI4WUHG6PDjidOMBIB0uIESB/EoH7eH4XdlLFEOvoHNFtHDOc7Plj/Pd98tF9coIYhQL9xvniZB9LQFW9T03jtegSQAE0xtLaWjeIHtf74y5hbsalw29f611jQqQ1hIk0l3NAxR6byAmQ65XiKQYVta1Y+KJmgOsJfVcgX6VWoHmXBhQZyMZ5szZjSMfe5cTWQhgkAAADNAAAAAAAAL5pAAAAAAA",1,"img","img-responsive",2,"margin-left","26%"],[2,"color","rgb(5, 5, 5)"],[1,"col-narrow","features__phone"],[1,"col-wide--right","features__padding"],["src","https://encrypted-tbn1.gstatic.com/shopping?q=tbn:ANd9GcRU1pqS4z5YOSzmK0ZrDT6IAdcD8fChkUpdFwEnfBe96TzUB_2rL-VXMdoiSB4NvvThwXUplAAUVkG2OkayV6KSqeixuDB0M190Us8Gfqv5gVAo8e_KULcpTA&usqp=CAE",1,"img","img-responsive",2,"margin-left","20%"],[2,"color","rgb(12, 12, 12)"],[1,"col-narrow--right","features__safe"],["src","https://encrypted-tbn2.gstatic.com/shopping?q=tbn:ANd9GcTv4uW09zHCLxQqYf_-gqGa9mt6rgrlMTZalGdfADPPRnEJV0T8G_2k_dGuQdF843yt-vWcDhHeX_DsJ2iucDmhvH3eo_-KMrylYumFCsq26rSHNjrQgUfa&usqp=CAE",1,"img","img-responsive",2,"margin-left","20%"],[1,"row","row--dark-grey","row--padding-narrow"],[1,"row","container-wide"]],template:function(t,e){1&t&&(i.Ub(0,"html",0),i.Ub(1,"head"),i.Pb(2,"meta",1),i.Pb(3,"meta",2),i.Ub(4,"title"),i.yc(5,"ShopaHolic"),i.Tb(),i.Pb(6,"meta",3),i.Pb(7,"meta",4),i.Tb(),i.Ub(8,"body"),i.Ub(9,"div",5),i.Ub(10,"section",6),i.Ub(11,"h1",7),i.yc(12," Information Clothes "),i.Tb(),i.Tb(),i.Tb(),i.Ub(13,"div",8),i.Ub(14,"div",9),i.Ub(15,"div",10),i.Pb(16,"div",11),i.Ub(17,"div",12),i.Ub(18,"h2",13),i.yc(19," CREWNECK WESTBROOK "),i.Tb(),i.Pb(20,"img",14),i.Pb(21,"br"),i.Ub(22,"p",15),i.yc(23,"Ini merupakan crewneck dari brand westbrook yang berbahan dari katun."),i.Tb(),i.Pb(24,"br"),i.Tb(),i.Tb(),i.Ub(25,"div",10),i.Pb(26,"div",16),i.Ub(27,"div",17),i.Ub(28,"h2",13),i.yc(29," Erigo Coach Jacket Okinawa Beach Black "),i.Tb(),i.Pb(30,"img",18),i.Pb(31,"br"),i.Ub(32,"p",19),i.yc(33," Coach Jacket Erigo saat ini merupakan salah satu lini pakaian terbaik dan berkualitas tinggi di antara Local Brand Indonesia. Jaket berkerah dengan kancing jepret, saku fungsional, dan karet pada ujung lengan."),i.Tb(),i.Pb(34,"br"),i.Tb(),i.Tb(),i.Ub(35,"div",10),i.Pb(36,"div",20),i.Ub(37,"div",12),i.Ub(38,"h2",13),i.yc(39," Russ Sweater Crewneck Pouch Break Cream "),i.Tb(),i.Pb(40,"img",21),i.Pb(41,"br"),i.Ub(42,"p",19),i.yc(43,"bahan kualitas yang nyaman dan cocok dipakai untuk udara dingin dan outdoor."),i.Tb(),i.Pb(44,"br"),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Ub(45,"div",22),i.Ub(46,"footer",23),i.Pb(47,"div",12),i.Tb(),i.Tb(),i.Tb(),i.Tb())},styles:[""]}),t})();var p=n("hctd");let y=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Ib({type:t,selectors:[["app-images"]],decls:2,vars:0,template:function(t,e){1&t&&(i.Ub(0,"p"),i.yc(1,"images works!"),i.Tb())},styles:[""]}),t})();var g=n("0IaG"),v=n("D0XW"),m=n("HDdC"),b=n("Cfvw"),w=n("LRne"),T=n("JX91"),I=n("Zy1z"),E=n("lJxs"),O=n("Kqap"),S=n("/uUt"),D=n("pLZG"),A=n("pxpQ"),k=n("spgP"),N=n("Jgta"),_=n("zIRd"),C=n("qOnz"),j=n("q/0M"),x=function(t,e){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function R(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var P,L="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},M=M||{},F=L||self;function U(){}function V(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function q(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var B="closure_uid_"+(1e9*Math.random()>>>0),K=0;function G(t,e,n){return t.call.apply(t.bind,arguments)}function z(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function H(t,e,n){return(H=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?G:z).apply(null,arguments)}function Q(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function W(){return Date.now()}function Y(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Pb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function X(){this.j=this.j,this.i=this.i}X.prototype.j=!1,X.prototype.ka=function(){!this.j&&(this.j=!0,this.H(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,B)&&t[B]||(t[B]=++K)}(this)},X.prototype.H=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var J=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Z=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function $(t){return Array.prototype.concat.apply([],arguments)}function tt(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function et(t){return/^[\s\xa0]*$/.test(t)}var nt,rt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function it(t,e){return-1!=t.indexOf(e)}function ot(t,e){return t<e?-1:t>e?1:0}t:{var st=F.navigator;if(st){var at=st.userAgent;if(at){nt=at;break t}}nt=""}function ut(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function ct(t){var e={};for(var n in t)e[n]=t[n];return e}var ht="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<ht.length;o++)n=ht[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ft(t){return ft[" "](t),t}ft[" "]=U;var dt,pt,yt=it(nt,"Opera"),gt=it(nt,"Trident")||it(nt,"MSIE"),vt=it(nt,"Edge"),mt=vt||gt,bt=it(nt,"Gecko")&&!(it(nt.toLowerCase(),"webkit")&&!it(nt,"Edge"))&&!(it(nt,"Trident")||it(nt,"MSIE"))&&!it(nt,"Edge"),wt=it(nt.toLowerCase(),"webkit")&&!it(nt,"Edge");function Tt(){var t=F.document;return t?t.documentMode:void 0}t:{var It="",Et=(pt=nt,bt?/rv:([^\);]+)(\)|;)/.exec(pt):vt?/Edge\/([\d\.]+)/.exec(pt):gt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(pt):wt?/WebKit\/(\S+)/.exec(pt):yt?/(?:Version)[ \/]?(\S+)/.exec(pt):void 0);if(Et&&(It=Et?Et[1]:""),gt){var Ot=Tt();if(null!=Ot&&Ot>parseFloat(It)){dt=String(Ot);break t}}dt=It}var St={};function Dt(t){return function(t,e){var n=St;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=rt(String(dt)).split("."),r=rt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ot(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ot(0==s[2].length,0==a[2].length)||ot(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var At=F.document&&gt&&(Tt()||parseInt(dt,10))||void 0,kt=!gt||9<=Number(At),Nt=gt&&!Dt("9"),_t=function(){if(!F.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{F.addEventListener("test",U,e),F.removeEventListener("test",U,e)}catch(n){}return t}();function Ct(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function jt(t,e){if(Ct.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(bt){t:{try{ft(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:xt[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Ct.prototype.b=function(){this.defaultPrevented=!0},Y(jt,Ct);var xt={2:"touch",3:"pen",4:"mouse"};jt.prototype.b=function(){jt.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Nt)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Rt="closure_listenable_"+(1e6*Math.random()|0),Pt=0;function Lt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.da=i,this.key=++Pt,this.Y=this.Z=!1}function Mt(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.da=null}function Ft(t){this.src=t,this.a={},this.b=0}function Ut(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=J(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Mt(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Vt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.da==r)return i}return-1}Ft.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Vt(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Lt(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var qt="closure_lm_"+(1e6*Math.random()|0),Bt={};function Kt(t,e,n,r,i){if(r&&r.once)return zt(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Kt(t,e[o],n,r,i);return null}return n=$t(n),t&&t[Rt]?t.wa(e,n,q(r)?!!r.capture:!!r,i):Gt(t,e,n,!1,r,i)}function Gt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=q(i)?!!i.capture:!!i;if(s&&!kt)return null;var a=Jt(t);if(a||(t[qt]=a=new Ft(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Xt,e=kt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)_t||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Wt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function zt(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)zt(t,e[o],n,r,i);return null}return n=$t(n),t&&t[Rt]?t.xa(e,n,q(r)?!!r.capture:!!r,i):Gt(t,e,n,!0,r,i)}function Ht(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Ht(t,e[o],n,r,i);else r=q(r)?!!r.capture:!!r,n=$t(n),t&&t[Rt]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=Vt(o=t.a[e],n,r,i))&&(Mt(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Jt(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Vt(e,n,r,i)),(n=-1<t?e[t]:null)&&Qt(n))}function Qt(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Rt])Ut(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Wt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Jt(e))?(Ut(n,t),0==n.b&&(n.src=null,e[qt]=null)):Mt(t)}}}function Wt(t){return t in Bt?Bt[t]:Bt[t]="on"+t}function Yt(t,e){var n=t.listener,r=t.da||t.src;return t.Z&&Qt(t),n.call(r,e)}function Xt(t,e){if(t.Y)return!0;if(!kt){if(!e)t:{e=["window","event"];for(var n=F,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Yt(t,e=new jt(e,this))}return Yt(t,new jt(e,this))}function Jt(t){return(t=t[qt])instanceof Ft?t:null}var Zt="__closure_events_fn_"+(1e9*Math.random()>>>0);function $t(t){return"function"==typeof t?t:(t[Zt]||(t[Zt]=function(e){return t.handleEvent(e)}),t[Zt])}function te(){X.call(this),this.c=new Ft(this),this.J=this,this.D=null}function ee(t,e){var n,r=t.D;if(r)for(n=[];r;r=r.D)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Ct(e,t);else if(e instanceof Ct)e.target=e.target||t;else{var i=e;lt(e=new Ct(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=ne(s,r,!0,e)&&i}if(i=ne(s=e.a=t,r,!0,e)&&i,i=ne(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=ne(s=e.a=n[o],r,!1,e)&&i}function ne(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.da||s.src;s.Z&&Ut(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Y(te,X),te.prototype[Rt]=!0,(P=te.prototype).addEventListener=function(t,e,n,r){Kt(this,t,e,n,r)},P.removeEventListener=function(t,e,n,r){Ht(this,t,e,n,r)},P.H=function(){if(te.X.H.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Mt(n[r]);delete e.a[t],e.b--}}this.D=null},P.wa=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},P.xa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var re=F.JSON.stringify;function ie(){this.b=this.a=null}var oe,se=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new ue},function(t){t.reset()});function ae(){var t=fe,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function ue(){this.next=this.b=this.a=null}function ce(t){F.setTimeout(function(){throw t},0)}function he(t,e){oe||function(){var t=F.Promise.resolve(void 0);oe=function(){t.then(de)}}(),le||(oe(),le=!0),fe.add(t,e)}ie.prototype.add=function(t,e){var n=se.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},ue.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},ue.prototype.reset=function(){this.next=this.b=this.a=null};var le=!1,fe=new ie;function de(){for(var t;t=ae();){try{t.a.call(t.b)}catch(n){ce(n)}var e=se;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}le=!1}function pe(t,e){te.call(this),this.b=t||1,this.a=e||F,this.f=H(this.eb,this),this.g=W()}function ye(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function ge(t,e,n){if("function"==typeof t)n&&(t=H(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=H(t.handleEvent,t)}return 2147483647<Number(e)?-1:F.setTimeout(t,e||0)}function ve(t){t.a=ge(function(){t.a=null,t.c&&(t.c=!1,ve(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}Y(pe,te),(P=pe.prototype).aa=!1,P.M=null,P.eb=function(){if(this.aa){var t=W()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),ee(this,"tick"),this.aa&&(ye(this),this.start()))}},P.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=W())},P.H=function(){pe.X.H.call(this),ye(this),delete this.a};var me=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}x(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:ve(this)},e.prototype.H=function(){t.prototype.H.call(this),this.a&&(F.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(X);function be(t){X.call(this),this.b=t,this.a={}}Y(be,X);var we=[];function Te(t,e,n,r){Array.isArray(n)||(n&&(we[0]=n.toString()),n=we);for(var i=0;i<n.length;i++){var o=Kt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Ie(t){ut(t.a,function(t,e){this.a.hasOwnProperty(e)&&Qt(t)},t),t.a={}}function Ee(){this.a=!0}function Oe(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return re(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}be.prototype.H=function(){be.X.H.call(this),Ie(this)},be.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ee.prototype.info=function(){};var Se={},De=null;function Ae(){return De=De||new te}function ke(t){Ct.call(this,Se.Ga,t)}function Ne(t){var e=Ae();ee(e,new ke(e,t))}function _e(t,e){Ct.call(this,Se.STAT_EVENT,t),this.stat=e}function Ce(t){var e=Ae();ee(e,new _e(e,t))}function je(t){Ct.call(this,Se.Ha,t)}function xe(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return F.setTimeout(function(){t()},e)}Se.Ga="serverreachability",Y(ke,Ct),Se.STAT_EVENT="statevent",Y(_e,Ct),Se.Ha="timingevent",Y(je,Ct);var Re={NO_ERROR:0,fb:1,sb:2,rb:3,mb:4,qb:5,tb:6,Ea:7,TIMEOUT:8,wb:9},Pe={kb:"complete",Gb:"success",Fa:"error",Ea:"abort",yb:"ready",zb:"readystatechange",TIMEOUT:"timeout",ub:"incrementaldata",xb:"progress",nb:"downloadprogress",Ob:"uploadprogress"};function Le(){}function Me(){}Le.prototype.b=null;var Fe,Ue={OPEN:"a",jb:"b",Fa:"c",vb:"d"};function Ve(){Ct.call(this,"d")}function qe(){Ct.call(this,"c")}function Be(){}function Ke(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new be(this),this.P=Ge,this.R=new pe(t=mt?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.G=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}Y(Ve,Ct),Y(qe,Ct),Y(Be,Le),Be.prototype.a=function(){return new XMLHttpRequest},Be.prototype.c=function(){return{}},Fe=new Be;var Ge=45e3,ze={},He={};function Qe(t,e,n){t.G=1,t.i=gn(hn(e)),t.j=n,t.I=!0,We(t,null)}function We(t,e){t.u=W(),Je(t),t.l=hn(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Nn(n.b,"t",r),t.D=0,t.a=Er(t.g,t.g.C?e:null),0<t.O&&(t.F=new me(H(t.Da,t,t.a),t.O)),Te(t.J,t.a,"readystatechange",t.bb),e=t.B?ct(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Ne(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var h=c[0];c=c[1];var l=h.split("_");s=2<=l.length&&"type"==l[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function Ye(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Xe(t,n);if(i==He){4==e&&(t.h=4,Ce(14),r=!1),Oe(t.c,t.f,null,"[Incomplete Response]");break}if(i==ze){t.h=4,Ce(15),Oe(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Oe(t.c,t.f,i,null),nn(t,i)}4==e&&0==n.length&&(t.h=1,Ce(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),yr(e),e.F=!0,Ce(11))):(Oe(t.c,t.f,n,"[Invalid Chunked Response]"),en(t),tn(t))}function Xe(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?He:(n=Number(e.substring(n,r)),isNaN(n)?ze:(r+=1)+n>e.length?He:(e=e.substr(r,n),t.D=r+n,e))}function Je(t){t.T=W()+t.P,Ze(t,t.P)}function Ze(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=xe(H(t.$a,t),e)}function $e(t){t.o&&(F.clearTimeout(t.o),t.o=null)}function tn(t){0==t.g.v||t.A||mr(t.g,t)}function en(t){$e(t);var e=t.F;e&&"function"==typeof e.ka&&e.ka(),t.F=null,ye(t.R),Ie(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ka())}function nn(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Ln(n.b,t)))if(n.I=t.N,!t.C&&Ln(n.b,t)&&3==n.v){try{var r=n.la.a.parse(e)}catch(Ad){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;vr(n),sr(n)}pr(n),Ce(18)}}else n.pa=i[1],0<n.pa-n.P&&37500>i[2]&&n.G&&0==n.o&&!n.m&&(n.m=xe(H(n.Xa,n),6e3));if(1>=Pn(n.b)&&n.fa){try{n.fa()}catch(Ad){}n.fa=void 0}}else wr(n,11)}else if((t.C||n.a==t)&&vr(n),!et(e))for(e=r=n.la.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ha=i[2];var o=i[3];null!=o&&(n.ia=o,n.c.info("VER="+n.ia));var s=i[4];null!=s&&(n.qa=s,n.c.info("SVER="+n.qa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var l=u.b;!l.a&&(it(h,"spdy")||it(h,"quic")||it(h,"h2"))&&(l.f=l.g,l.a=new Set,l.b&&(Mn(l,l.b),l.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.oa=f,yn(u.B,u.A,f))}}n.v=3,n.f&&n.f.ua(),n.U&&(n.N=W()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).ma=Ir(u,u.C?u.ha:null,u.ga),d.C){Fn(u.b,d);var p=d,y=u.D;y&&p.setTimeout(y),p.o&&($e(p),Je(p)),u.a=d}else dr(u);0<n.g.length&&cr(n)}else"stop"!=i[0]&&"close"!=i[0]||wr(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?wr(n,7):or(n):"noop"!=i[0]&&n.f&&n.f.ta(i),n.o=0);Ne(4)}catch(Ad){}}function rn(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(V(t)||"string"==typeof t)Z(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(V(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(V(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function on(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof on)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function sn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];an(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)an(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function an(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(P=Ke.prototype).setTimeout=function(t){this.P=t},P.bb=function(t){t=t.target;var e=this.F;e&&3==er(t)?e.f():this.Da(t)},P.Da=function(t){try{if(t==this.a)t:{var e=er(this.a),n=this.a.va(),r=this.a.W();if(!(3>e||3==e&&!mt&&!this.a.$())){this.A||4!=e||7==n||Ne(8==n||0>=r?3:2),$e(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!et(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,Ce(12),en(this),tn(this);break t}Oe(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,nn(this,u)}this.I?(Ye(this,e,o),mt&&this.b&&3==e&&(Te(this.J,this.R,"tick",this.ab),this.R.start())):(Oe(this.c,this.f,o,null),nn(this,o)),4==e&&en(this),this.b&&!this.A&&(4==e?mr(this.g,this):(this.b=!1,Je(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Ce(12)):(this.h=0,Ce(13)),en(this),tn(this)}}}catch(c){}},P.ab=function(){if(this.a){var t=er(this.a),e=this.a.$();this.D<e.length&&($e(this),Ye(this,t,e),this.b&&4!=t&&Je(this))}},P.cancel=function(){this.A=!0,en(this)},P.$a=function(){this.o=null;var t=W();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.G&&(Ne(3),Ce(17)),en(this),this.h=2,tn(this)):Ze(this,this.T-t)},(P=on.prototype).K=function(){sn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},P.L=function(){return sn(this),this.a.concat()},P.get=function(t,e){return an(this.b,t)?this.b[t]:e},P.set=function(t,e){an(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},P.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var un=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function cn(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof cn){this.a=void 0!==e?e:t.a,ln(this,t.f),this.j=t.j,fn(this,t.c),dn(this,t.h),this.g=t.g,e=t.b;var n=new Sn;n.c=e.c,e.a&&(n.a=new on(e.a),n.b=e.b),pn(this,n),this.i=t.i}else t&&(n=String(t).match(un))?(this.a=!!e,ln(this,n[1]||"",!0),this.j=vn(n[2]||""),fn(this,n[3]||"",!0),dn(this,n[4]),this.g=vn(n[5]||"",!0),pn(this,n[6]||"",!0),this.i=vn(n[7]||"")):(this.a=!!e,this.b=new Sn(null,this.a))}function hn(t){return new cn(t)}function ln(t,e,n){t.f=n?vn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function fn(t,e,n){t.c=n?vn(e,!0):e}function dn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function pn(t,e,n){e instanceof Sn?(t.b=e,function(t,e){e&&!t.f&&(Dn(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(An(this,e),Nn(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=mn(e,En)),t.b=new Sn(e,t.a))}function yn(t,e,n){t.b.set(e,n)}function gn(t){return yn(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^W()).toString(36)),t}function vn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function mn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,bn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function bn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}cn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(mn(e,wn,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(mn(e,wn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(mn(n,"/"==n.charAt(0)?In:Tn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",mn(n,On)),t.join("")};var wn=/[#\/\?@]/g,Tn=/[#\?:]/g,In=/[#\?]/g,En=/[#\?@]/g,On=/#/g;function Sn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Dn(t){t.a||(t.a=new on,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function An(t,e){Dn(t),e=_n(t,e),an(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,an((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&sn(t)))}function kn(t,e){return Dn(t),e=_n(t,e),an(t.a.b,e)}function Nn(t,e,n){An(t,e),0<n.length&&(t.c=null,t.a.set(_n(t,e),tt(n)),t.b+=n.length)}function _n(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(P=Sn.prototype).add=function(t,e){Dn(this),this.c=null,t=_n(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},P.forEach=function(t,e){Dn(this),this.a.forEach(function(n,r){Z(n,function(n){t.call(e,n,r,this)},this)},this)},P.L=function(){Dn(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},P.K=function(t){Dn(this);var e=[];if("string"==typeof t)kn(this,t)&&(e=$(e,this.a.get(_n(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=$(e,t[n])}return e},P.set=function(t,e){return Dn(this),this.c=null,kn(this,t=_n(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},P.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},P.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Cn=function(){return function(t,e){this.b=t,this.a=e}}();function jn(t){this.g=t||xn,t=F.PerformanceNavigationTiming?0<(t=F.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(F.ja&&F.ja.za&&F.ja.za()&&F.ja.za().Qb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var xn=10;function Rn(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Pn(t){return t.b?1:t.a?t.a.size:0}function Ln(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Mn(t,e){t.a?t.a.add(e):t.b=e}function Fn(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Un(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=R(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return tt(t.c)}function Vn(){}function qn(){this.a=new Vn}function Bn(t,e,n){var r=n||"";try{rn(t,function(t,n){var i=t;q(t)&&(i=re(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(Jd){throw e.push(r+"type="+encodeURIComponent("_badmap")),Jd}}function Kn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}jn.prototype.cancel=function(){var t,e;if(this.c=Un(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=R(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Vn.prototype.stringify=function(t){return F.JSON.stringify(t,void 0)},Vn.prototype.parse=function(t){return F.JSON.parse(t,void 0)};var Gn=F.JSON.parse;function zn(t){te.call(this),this.headers=new on,this.l=t||null,this.b=!1,this.u=this.a=null,this.C="",this.h=0,this.f="",this.g=this.B=this.m=this.A=!1,this.s=0,this.o=null,this.I=Hn,this.F=this.G=!1}Y(zn,te);var Hn="",Qn=/^https?$/i,Wn=["POST","PUT"];function Yn(t){return"content-type"==t.toLowerCase()}function Xn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Jn(t),$n(t)}function Jn(t){t.A||(t.A=!0,ee(t,"complete"),ee(t,"error"))}function Zn(t){if(t.b&&void 0!==M&&(!t.u[1]||4!=er(t)||2!=t.W()))if(t.m&&4==er(t))ge(t.Aa,0,t);else if(ee(t,"readystatechange"),4==er(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.C).match(un)[1]||null;if(!o&&F.self&&F.self.location){var s=F.self.location.protocol;o=s.substr(0,s.length-1)}i=!Qn.test(o?o.toLowerCase():"")}e=i}if(e)ee(t,"complete"),ee(t,"success");else{t.h=6;try{var a=2<er(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",Jn(t)}}finally{$n(t)}}}function $n(t,e){if(t.a){tr(t);var n=t.a,r=t.u[0]?U:null;t.a=null,t.u=null,e||ee(t,"ready");try{n.onreadystatechange=r}catch(Jd){}}}function tr(t){t.a&&t.F&&(t.a.ontimeout=null),t.o&&(F.clearTimeout(t.o),t.o=null)}function er(t){return t.a?t.a.readyState:0}function nr(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return ut(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):yn(t,e,n))}function rr(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function ir(t){this.qa=0,this.g=[],this.c=new Ee,this.ha=this.ma=this.B=this.ga=this.a=this.oa=this.A=this.V=this.i=this.O=this.l=null,this.Pa=this.R=0,this.Ma=rr("failFast",!1,t),this.G=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.pa=this.P=-1,this.T=this.o=this.u=0,this.Ia=rr("baseRetryDelayMs",5e3,t),this.Sa=rr("retryDelaySeedMs",1e4,t),this.Na=rr("forwardChannelMaxRetries",2,t),this.na=rr("forwardChannelRequestTimeoutMs",2e4,t),this.Oa=t&&t.xmlHttpFactory||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new jn(t&&t.concurrentRequestLimit),this.la=new qn,this.ea=t&&t.fastHandshake||!1,this.Ja=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.ea&&this.S&&t&&t.detectBufferingProxy||!1,this.fa=void 0,this.N=0,this.F=!1,this.s=null,(this.La=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function or(t){if(ar(t),3==t.v){var e=t.R++,n=hn(t.B);yn(n,"SID",t.J),yn(n,"RID",e),yn(n,"TYPE","terminate"),lr(t,n),(e=new Ke(t,t.c,e,void 0)).G=2,e.i=gn(hn(n)),n=!1,F.navigator&&F.navigator.sendBeacon&&(n=F.navigator.sendBeacon(e.i.toString(),"")),!n&&F.Image&&((new Image).src=e.i,n=!0),n||(e.a=Er(e.g,null),e.a.ba(e.i)),e.u=W(),Je(e)}Tr(t)}function sr(t){t.a&&(yr(t),t.a.cancel(),t.a=null)}function ar(t){sr(t),t.j&&(F.clearTimeout(t.j),t.j=null),vr(t),t.b.cancel(),t.h&&("number"==typeof t.h&&F.clearTimeout(t.h),t.h=null)}function ur(t,e){t.g.push(new Cn(t.Pa++,e)),3==t.v&&cr(t)}function cr(t){Rn(t.b)||t.h||(t.h=!0,he(t.Ca,t),t.u=0)}function hr(t,e){var n;n=e?e.f:t.R++;var r=hn(t.B);yn(r,"SID",t.J),yn(r,"RID",n),yn(r,"AID",t.P),lr(t,r),t.i&&t.l&&nr(r,t.i,t.l),n=new Ke(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=fr(t,n,1e3),n.setTimeout(Math.round(.5*t.na)+Math.round(.5*t.na*Math.random())),Mn(t.b,n),Qe(n,r,e)}function lr(t,e){t.f&&rn({},function(t,n){yn(e,n,t)})}function fr(t,e,n){n=Math.min(t.g.length,n);var r=t.f?H(t.f.Ka,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{Bn(h,s,"req"+c+"_")}catch(si){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function dr(t){t.a||t.j||(t.T=1,he(t.Ba,t),t.o=0)}function pr(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=xe(H(t.Ba,t),br(t,t.o)),t.o++,0))}function yr(t){null!=t.s&&(F.clearTimeout(t.s),t.s=null)}function gr(t){t.a=new Ke(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=hn(t.ma);yn(e,"RID","rpc"),yn(e,"SID",t.J),yn(e,"CI",t.G?"0":"1"),yn(e,"AID",t.P),lr(t,e),yn(e,"TYPE","xmlhttp"),t.i&&t.l&&nr(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ha,n.G=1,n.i=gn(hn(e)),n.j=null,n.I=!0,We(n,t)}function vr(t){null!=t.m&&(F.clearTimeout(t.m),t.m=null)}function mr(t,e){var n=null;if(t.a==e){vr(t),yr(t),t.a=null;var r=2}else{if(!Ln(t.b,e))return;n=e.s,Fn(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=W()-e.u;var i=t.u;ee(r=Ae(),new je(r,n,e,i)),cr(t)}else dr(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Pn(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.Ma?0:t.Na)||(t.h=xe(H(t.Ca,t,e),br(t,t.u)),t.u++,0)))}(t,e)||2==r&&pr(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:wr(t,5);break;case 4:wr(t,10);break;case 3:wr(t,6);break;default:wr(t,2)}}function br(t,e){var n=t.Ia+Math.floor(Math.random()*t.Sa);return t.f||(n*=2),n*e}function wr(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=H(t.cb,t);n||(n=new cn("//www.google.com/images/cleardot.gif"),F.location&&"http"==F.location.protocol||ln(n,"https"),gn(n)),function(t,e){var n=new Ee;if(F.Image){var r=new Image;r.onload=Q(Kn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Q(Kn,n,r,"TestLoadImage: error",!1,e),r.onabort=Q(Kn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Q(Kn,n,r,"TestLoadImage: timeout",!1,e),F.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Ce(2);t.v=0,t.f&&t.f.sa(e),Tr(t),ar(t)}function Tr(t){t.v=0,t.I=-1,t.f&&(0==Un(t.b).length&&0==t.g.length||(t.b.c.length=0,tt(t.g),t.g.length=0),t.f.ra())}function Ir(t,e,n){var r=function(t){return t instanceof cn?hn(t):new cn(t,void 0)}(n);if(""!=r.c)e&&fn(r,e+"."+r.c),dn(r,r.h);else{var i=F.location;r=function(t,e,n,r){var i=new cn(null,void 0);return t&&ln(i,t),e&&fn(i,e),n&&dn(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&ut(t.V,function(t,e){yn(r,e,t)}),n=t.oa,(e=t.A)&&n&&yn(r,e,n),yn(r,"VER",t.ia),lr(t,r),r}function Er(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new zn(t.Oa)).G=t.C,e}function Or(){}function Sr(){if(gt&&!(10<=Number(At)))throw Error("Environmental error: no available transport.")}function Dr(t,e){te.call(this),this.a=new ir(e),this.g=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!et(t)&&(this.a.i=t),this.o=e&&e.supportsCrossDomainXhr||!1,this.m=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!et(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Nr(this)}function Ar(t){Ve.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function kr(){qe.call(this),this.status=1}function Nr(t){this.a=t}function _r(t){this.f=t}function Cr(t){te.call(this),this.u=t,this.h=void 0,this.readyState=jr,this.status=0,this.responseType=this.responseText=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.o="",this.a=!1,this.m=this.f=this.g=null}(P=zn.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.C+"; newUri="+t);e=e?e.toUpperCase():"GET",this.C=t,this.f="",this.h=0,this.A=!1,this.b=!0,this.a=this.l?this.l.a():Fe.a(),this.u=function(t){return t.b||(t.b=t.c())}(this.l?this.l:Fe),this.a.onreadystatechange=H(this.Aa,this);try{this.B=!0,this.a.open(e,String(t),!0),this.B=!1}catch(o){return void Xn(this,o)}t=n||"";var i=new on(this.headers);r&&rn(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Yn,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=F.FormData&&t instanceof F.FormData,!(0<=J(Wn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.G&&(this.a.withCredentials=this.G);try{tr(this),0<this.s&&((this.F=function(t){return gt&&Dt(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.s,this.a.ontimeout=H(this.ya,this)):this.o=ge(this.ya,this.s,this)),this.m=!0,this.a.send(t),this.m=!1}catch(o){Xn(this,o)}},P.ya=function(){void 0!==M&&this.a&&(this.f="Timed out after "+this.s+"ms, aborting",this.h=8,ee(this,"timeout"),this.abort(8))},P.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,ee(this,"complete"),ee(this,"abort"),$n(this))},P.H=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),$n(this,!0)),zn.X.H.call(this)},P.Aa=function(){this.j||(this.B||this.m||this.g?Zn(this):this.Za())},P.Za=function(){Zn(this)},P.W=function(){try{return 2<er(this)?this.a.status:-1}catch(pt){return-1}},P.$=function(){try{return this.a?this.a.responseText:""}catch(pt){return""}},P.Qa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Gn(e)}},P.va=function(){return this.h},P.Ra=function(){return"string"==typeof this.f?this.f:String(this.f)},(P=ir.prototype).ia=8,P.v=1,P.Ca=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Ke(this,this.c,t,void 0),r=this.l;if(this.O&&(r?lt(r=ct(r),this.O):r=this.O),null===this.i&&(n.B=r),this.ea)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=fr(this,n,e),yn(i=hn(this.B),"RID",t),yn(i,"CVER",22),this.A&&yn(i,"X-HTTP-Session-Id",this.A),lr(this,i),this.i&&r&&nr(i,this.i,r),Mn(this.b,n),this.Ja&&yn(i,"TYPE","init"),this.ea?(yn(i,"$req",e),yn(i,"SID","null"),n.U=!0,Qe(n,i,null)):Qe(n,i,e),this.v=2}}else 3==this.v&&(t?hr(this,t):0==this.g.length||Rn(this.b)||hr(this))},P.Ba=function(){if(this.j=null,gr(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=xe(H(this.Ya,this),t)}},P.Ya=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.F=!0,Ce(10),sr(this),gr(this))},P.Xa=function(){null!=this.m&&(this.m=null,sr(this),pr(this),Ce(19))},P.cb=function(t){t?(this.c.info("Successfully pinged google.com"),Ce(2)):(this.c.info("Failed to ping google.com"),Ce(1))},(P=Or.prototype).ua=function(){},P.ta=function(){},P.sa=function(){},P.ra=function(){},P.Ka=function(){},Sr.prototype.a=function(t,e){return new Dr(t,e)},Y(Dr,te),Dr.prototype.h=function(){this.a.f=this.f,this.o&&(this.a.C=!0);var t=this.a,e=this.g,n=this.b||void 0;Ce(0),t.ga=e,t.V=n||{},t.G=t.S,t.B=Ir(t,null,t.ga),cr(t)},Dr.prototype.close=function(){or(this.a)},Dr.prototype.l=function(t){if("string"==typeof t){var e={};e.__data__=t,ur(this.a,e)}else this.m?((e={}).__data__=re(t),ur(this.a,e)):ur(this.a,t)},Dr.prototype.H=function(){this.a.f=null,delete this.f,or(this.a),delete this.a,Dr.X.H.call(this)},Y(Ar,Ve),Y(kr,qe),Y(Nr,Or),Nr.prototype.ua=function(){ee(this.a,"a")},Nr.prototype.ta=function(t){ee(this.a,new Ar(t))},Nr.prototype.sa=function(t){ee(this.a,new kr(t))},Nr.prototype.ra=function(){ee(this.a,"b")},Y(_r,Le),_r.prototype.a=function(){return new Cr(this.f)},_r.prototype.c=function(t){return function(){return t}}({}),Y(Cr,te);var jr=0;function xr(t){t.f.read().then(t.Ta.bind(t)).catch(t.ca.bind(t))}function Rr(t){t.readyState=4,t.g=null,t.f=null,t.m=null,Pr(t)}function Pr(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(P=Cr.prototype).open=function(t,e){if(this.readyState!=jr)throw this.abort(),Error("Error reopening a connection");this.s=t,this.o=e,this.readyState=1,Pr(this)},P.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.o,e)).then(this.Wa.bind(this),this.ca.bind(this))},P.abort=function(){this.responseText="",this.l=new Headers,this.status=0,this.f&&this.f.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Rr(this)),this.readyState=jr},P.Wa=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,Pr(this)),this.a&&(this.readyState=3,Pr(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.Ua.bind(this),this.ca.bind(this)):void 0!==F.ReadableStream&&"body"in t?(this.responseText="",this.f=t.body.getReader(),this.m=new TextDecoder,xr(this)):t.text().then(this.Va.bind(this),this.ca.bind(this)))))},P.Ta=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.responseText+=e),t.done?Rr(this):Pr(this),3==this.readyState&&xr(this)}},P.Va=function(t){this.a&&(this.responseText=t,Rr(this))},P.Ua=function(){this.a&&Rr(this)},P.ca=function(){this.a&&Rr(this)},P.setRequestHeader=function(t,e){this.l.append(t,e)},P.getResponseHeader=function(t){return this.b&&this.b.get(t.toLowerCase())||""},P.getAllResponseHeaders=function(){if(!this.b)return"";for(var t=[],e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Cr.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),Sr.prototype.createWebChannel=Sr.prototype.a,Dr.prototype.send=Dr.prototype.l,Dr.prototype.open=Dr.prototype.h,Dr.prototype.close=Dr.prototype.close,Re.NO_ERROR=0,Re.TIMEOUT=8,Re.HTTP_ERROR=6,Pe.COMPLETE="complete",Me.EventType=Ue,Ue.OPEN="a",Ue.CLOSE="b",Ue.ERROR="c",Ue.MESSAGE="d",te.prototype.listen=te.prototype.wa,zn.prototype.listenOnce=zn.prototype.xa,zn.prototype.getLastError=zn.prototype.Ra,zn.prototype.getLastErrorCode=zn.prototype.va,zn.prototype.getStatus=zn.prototype.W,zn.prototype.getResponseJson=zn.prototype.Qa,zn.prototype.getResponseText=zn.prototype.$,zn.prototype.send=zn.prototype.ba;var Lr=Re,Mr=Pe,Fr=Se,Ur=_r,Vr=Me,qr=zn,Br=n("mrSG"),Kr=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Kr.o=-1;var Gr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},zr=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(Br.c)(e,t),e}(Error),Hr=new j.b("@firebase/firestore");function Qr(){return Hr.logLevel}function Wr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Hr.logLevel<=j.a.DEBUG){var r=e.map(Jr);Hr.debug.apply(Hr,Object(Br.f)(["Firestore (8.6.8): "+t],r))}}function Yr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Hr.logLevel<=j.a.ERROR){var r=e.map(Jr);Hr.error.apply(Hr,Object(Br.f)(["Firestore (8.6.8): "+t],r))}}function Xr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Hr.logLevel<=j.a.WARN){var r=e.map(Jr);Hr.warn.apply(Hr,Object(Br.f)(["Firestore (8.6.8): "+t],r))}}function Jr(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(Jd){return t}}function Zr(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.6.8) INTERNAL ASSERTION FAILED: "+t;throw Yr(e),new Error(e)}function $r(t,e){t||Zr()}function ti(t,e){return t}function ei(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var ni=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=ei(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function ri(t,e){return t<e?-1:t>e?1:0}function ii(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function oi(t){return t+"\0"}var si=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new zr(Gr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new zr(Gr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new zr(Gr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new zr(Gr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?ri(this.nanoseconds,t.nanoseconds):ri(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),ai=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new si(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function ui(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ci(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function hi(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var li=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Zr(),void 0===n?n=t.length-e:n>t.length-e&&Zr(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),fi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Br.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new zr(Gr.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(li),di=/^[_a-zA-Z][_a-zA-Z0-9]*$/,pi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Br.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return di.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new zr(Gr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new zr(Gr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new zr(Gr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new zr(Gr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(li),yi=function(){function t(t){this.fields=t,t.sort(pi.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return ii(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),gi=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return ri(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();gi.EMPTY_BYTE_STRING=new gi("");var vi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mi(t){if($r(!!t),"string"==typeof t){var e=0,n=vi.exec(t);if($r(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:bi(t.seconds),nanos:bi(t.nanos)}}function bi(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function wi(t){return"string"==typeof t?gi.fromBase64String(t):gi.fromUint8Array(t)}function Ti(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ii(t){var e=t.mapValue.fields.__previous_value__;return Ti(e)?Ii(e):e}function Ei(t){var e=mi(t.mapValue.fields.__local_write_time__.timestampValue);return new si(e.seconds,e.nanos)}function Oi(t){return null==t}function Si(t){return 0===t&&1/t==-1/0}function Di(t){return"number"==typeof t&&Number.isInteger(t)&&!Si(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Ai=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(fi.fromString(e))},t.fromName=function(e){return new t(fi.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===fi.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return fi.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new fi(e.slice()))},t}();function ki(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ti(t)?4:10:Zr()}function Ni(t,e){var n=ki(t);if(n!==ki(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ei(t).isEqual(Ei(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=mi(t.timestampValue),r=mi(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return wi(t.bytesValue).isEqual(wi(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return bi(t.geoPointValue.latitude)===bi(e.geoPointValue.latitude)&&bi(t.geoPointValue.longitude)===bi(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return bi(t.integerValue)===bi(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=bi(t.doubleValue),r=bi(e.doubleValue);return n===r?Si(n)===Si(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return ii(t.arrayValue.values||[],e.arrayValue.values||[],Ni);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(ui(n)!==ui(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ni(n[i],r[i])))return!1;return!0}(t,e);default:return Zr()}}function _i(t,e){return void 0!==(t.values||[]).find(function(t){return Ni(t,e)})}function Ci(t,e){var n=ki(t),r=ki(e);if(n!==r)return ri(n,r);switch(n){case 0:return 0;case 1:return ri(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=bi(t.integerValue||t.doubleValue),r=bi(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return ji(t.timestampValue,e.timestampValue);case 4:return ji(Ei(t),Ei(e));case 5:return ri(t.stringValue,e.stringValue);case 6:return function(t,e){var n=wi(t),r=wi(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=ri(n[i],r[i]);if(0!==o)return o}return ri(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=ri(bi(t.latitude),bi(e.latitude));return 0!==n?n:ri(bi(t.longitude),bi(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Ci(n[i],r[i]);if(o)return o}return ri(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=ri(r[s],o[s]);if(0!==a)return a;var u=Ci(n[r[s]],i[o[s]]);if(0!==u)return u}return ri(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Zr()}}function ji(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return ri(t,e);var n=mi(t),r=mi(e),i=ri(n.seconds,r.seconds);return 0!==i?i:ri(n.nanos,r.nanos)}function xi(t){return Ri(t)}function Ri(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=mi(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?wi(t.bytesValue).toBase64():"referenceValue"in t?Ai.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Ri(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Ri(t.fields[o])}return e+"}"}(t.mapValue):Zr();var e}function Pi(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Li(t){return!!t&&"integerValue"in t}function Mi(t){return!!t&&"arrayValue"in t}function Fi(t){return!!t&&"nullValue"in t}function Ui(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Vi(t){return!!t&&"mapValue"in t}function qi(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue)return{timestampValue:Object.assign({},mi(t.timestampValue))};if(t.mapValue){var e={mapValue:{fields:{}}};return ci(t.mapValue.fields,function(t,n){return e.mapValue.fields[t]=qi(n)}),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=qi(t.arrayValue.values[r]);return n}return Object.assign({},t)}var Bi=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!Vi(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=qi(e)},t.prototype.setAll=function(t){var e=this,n=pi.emptyPath(),r={},i=[];t.forEach(function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=qi(t):i.push(o.lastSegment())});var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());Vi(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return Ni(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];Vi(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){ci(e,function(e,n){return t[e]=n});for(var r=0,i=n;r<i.length;r++)delete t[i[r]]},t.prototype.clone=function(){return new t(qi(this.value))},t}();function Ki(t){var e=[];return ci(t.fields,function(t,n){var r=new pi([t]);if(Vi(n)){var i=Ki(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new yi(e)}var Gi=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,ai.min(),Bi.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Bi.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Bi.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Bi.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Bi.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),zi=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function Hi(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new zi(t,e,n,r,i,o,s)}function Qi(t){var e=ti(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+xi(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),Oi(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=so(e.startAt)),e.endAt&&(n+="|ub:",n+=so(e.endAt)),e.h=n}return e.h}function Wi(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!uo(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Ni(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ho(t.startAt,e.startAt)&&ho(t.endAt,e.endAt)}function Yi(t){return Ai.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Xi=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(Br.c)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Ji(t,n,r):"array-contains"===n?new eo(t,r):"in"===n?new no(t,r):"not-in"===n?new ro(t,r):"array-contains-any"===n?new io(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Zi(t,n):new $i(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Ci(e,this.value)):null!==e&&ki(this.value)===ki(e)&&this.m(Ci(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Zr()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Ji=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Ai.fromName(r.referenceValue),i}return Object(Br.c)(e,t),e.prototype.matches=function(t){var e=Ai.comparator(t.key,this.key);return this.m(e)},e}(Xi),Zi=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=to(0,n),r}return Object(Br.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Xi),$i=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=to(0,n),r}return Object(Br.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Xi);function to(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return Ai.fromName(t.referenceValue)})}var eo=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(Br.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Mi(e)&&_i(e.arrayValue,this.value)},e}(Xi),no=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(Br.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&_i(this.value.arrayValue,e)},e}(Xi),ro=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(Br.c)(e,t),e.prototype.matches=function(t){if(_i(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!_i(this.value.arrayValue,e)},e}(Xi),io=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(Br.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Mi(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return _i(e.value.arrayValue,t)})},e}(Xi),oo=function(t,e){this.position=t,this.before=e};function so(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return xi(t)}).join(",")}var ao=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function uo(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function co(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?Ai.comparator(Ai.fromName(s.referenceValue),n.key):Ci(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function ho(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Ni(t.position[n],e.position[n]))return!1;return!0}var lo=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function fo(t,e,n,r,i,o,s,a){return new lo(t,e,n,r,i,o,s,a)}function po(t){return new lo(t)}function yo(t){return!Oi(t.limit)&&"F"===t.limitType}function go(t){return!Oi(t.limit)&&"L"===t.limitType}function vo(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function mo(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function bo(t){return null!==t.collectionGroup}function wo(t){var e=ti(t);if(null===e.p){e.p=[];var n=mo(e),r=vo(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new ao(n)),e.p.push(new ao(pi.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new ao(pi.keyField(),u))}}}return e.p}function To(t){var e=ti(t);if(!e.T)if("F"===e.limitType)e.T=Hi(e.path,e.collectionGroup,wo(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=wo(e);r<i.length;r++){var o=i[r];n.push(new ao(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new oo(e.endAt.position,!e.endAt.before):null,a=e.startAt?new oo(e.startAt.position,!e.startAt.before):null;e.T=Hi(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function Io(t,e,n){return new lo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Eo(t,e){return Wi(To(t),To(e))&&t.limitType===e.limitType}function Oo(t){return Qi(To(t))+"|lt:"+t.limitType}function So(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+xi(e.value);var e}).join(", ")+"]"),Oi(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+so(t.startAt)),t.endAt&&(e+=", endAt: "+so(t.endAt)),"Target("+e+")"}(To(t))+"; limitType="+t.limitType+")"}function Do(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Ai.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!co(t.startAt,wo(t),e)||t.endAt&&co(t.endAt,wo(t),e))}(t,e)}function Ao(t){return function(e,n){for(var r=!1,i=0,o=wo(t);i<o.length;i++){var s=o[i],a=ko(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function ko(t,e,n){var r=t.field.isKeyField()?Ai.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Ci(r,i):Zr()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Zr()}}function No(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Si(e)?"-0":e}}function _o(t){return{integerValue:""+t}}function Co(t,e){return Di(e)?_o(e):No(t,e)}var jo=function(){this._=void 0};function xo(t,e,n){return t instanceof Lo?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Mo?Fo(t,e):t instanceof Uo?Vo(t,e):function(t,e){var n=Po(t,e),r=Bo(n)+Bo(t.A);return Li(n)&&Li(t.A)?_o(r):No(t.R,r)}(t,e)}function Ro(t,e,n){return t instanceof Mo?Fo(t,e):t instanceof Uo?Vo(t,e):n}function Po(t,e){return t instanceof qo?Li(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Lo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Br.c)(e,t),e}(jo),Mo=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Br.c)(e,t),e}(jo);function Fo(t,e){for(var n=Ko(e),r=function(t){n.some(function(e){return Ni(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Uo=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Br.c)(e,t),e}(jo);function Vo(t,e){for(var n=Ko(e),r=function(t){n=n.filter(function(e){return!Ni(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var qo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(Br.c)(e,t),e}(jo);function Bo(t){return bi(t.integerValue||t.doubleValue)}function Ko(t){return Mi(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Go=function(t,e){this.field=t,this.transform=e},zo=function(t,e){this.version=t,this.transformResults=e},Ho=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Qo(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Wo=function(){};function Yo(t,e,n){t instanceof ts?function(t,e,n){var r=t.value.clone(),i=rs(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof es?function(t,e,n){if(Qo(t.precondition,e)){var r=rs(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(ns(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Xo(t,e,n){t instanceof ts?function(t,e,n){if(Qo(t.precondition,e)){var r=t.value.clone(),i=is(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument($o(e),r).setHasLocalMutations()}}(t,e,n):t instanceof es?function(t,e,n){if(Qo(t.precondition,e)){var r=is(t.fieldTransforms,n,e),i=e.data;i.setAll(ns(t)),i.setAll(r),e.convertToFoundDocument($o(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Qo(t.precondition,e)&&e.convertToNoDocument(ai.min())}(t,e)}function Jo(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=Po(o.transform,s||null);null!=a&&(null==n&&(n=Bi.empty()),n.set(o.field,a))}return n||null}function Zo(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&ii(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Mo&&e instanceof Mo||t instanceof Uo&&e instanceof Uo?ii(t.elements,e.elements,Ni):t instanceof qo&&e instanceof qo?Ni(t.A,e.A):t instanceof Lo&&e instanceof Lo}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function $o(t){return t.isFoundDocument()?t.version:ai.min()}var ts=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(Br.c)(e,t),e}(Wo),es=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(Br.c)(e,t),e}(Wo);function ns(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function rs(t,e,n){var r=new Map;$r(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Ro(s,a,n[i]))}return r}function is(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,xo(a,u,e))}return r}var os,ss,as=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(Br.c)(e,t),e}(Wo),us=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(Br.c)(e,t),e}(Wo),cs=function(t){this.count=t};function hs(t){switch(t){case Gr.OK:return Zr();case Gr.CANCELLED:case Gr.UNKNOWN:case Gr.DEADLINE_EXCEEDED:case Gr.RESOURCE_EXHAUSTED:case Gr.INTERNAL:case Gr.UNAVAILABLE:case Gr.UNAUTHENTICATED:return!1;case Gr.INVALID_ARGUMENT:case Gr.NOT_FOUND:case Gr.ALREADY_EXISTS:case Gr.PERMISSION_DENIED:case Gr.FAILED_PRECONDITION:case Gr.ABORTED:case Gr.OUT_OF_RANGE:case Gr.UNIMPLEMENTED:case Gr.DATA_LOSS:return!0;default:return Zr()}}function ls(t){if(void 0===t)return Yr("GRPC error has no .code"),Gr.UNKNOWN;switch(t){case os.OK:return Gr.OK;case os.CANCELLED:return Gr.CANCELLED;case os.UNKNOWN:return Gr.UNKNOWN;case os.DEADLINE_EXCEEDED:return Gr.DEADLINE_EXCEEDED;case os.RESOURCE_EXHAUSTED:return Gr.RESOURCE_EXHAUSTED;case os.INTERNAL:return Gr.INTERNAL;case os.UNAVAILABLE:return Gr.UNAVAILABLE;case os.UNAUTHENTICATED:return Gr.UNAUTHENTICATED;case os.INVALID_ARGUMENT:return Gr.INVALID_ARGUMENT;case os.NOT_FOUND:return Gr.NOT_FOUND;case os.ALREADY_EXISTS:return Gr.ALREADY_EXISTS;case os.PERMISSION_DENIED:return Gr.PERMISSION_DENIED;case os.FAILED_PRECONDITION:return Gr.FAILED_PRECONDITION;case os.ABORTED:return Gr.ABORTED;case os.OUT_OF_RANGE:return Gr.OUT_OF_RANGE;case os.UNIMPLEMENTED:return Gr.UNIMPLEMENTED;case os.DATA_LOSS:return Gr.DATA_LOSS;default:return Zr()}}(ss=os||(os={}))[ss.OK=0]="OK",ss[ss.CANCELLED=1]="CANCELLED",ss[ss.UNKNOWN=2]="UNKNOWN",ss[ss.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ss[ss.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ss[ss.NOT_FOUND=5]="NOT_FOUND",ss[ss.ALREADY_EXISTS=6]="ALREADY_EXISTS",ss[ss.PERMISSION_DENIED=7]="PERMISSION_DENIED",ss[ss.UNAUTHENTICATED=16]="UNAUTHENTICATED",ss[ss.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ss[ss.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ss[ss.ABORTED=10]="ABORTED",ss[ss.OUT_OF_RANGE=11]="OUT_OF_RANGE",ss[ss.UNIMPLEMENTED=12]="UNIMPLEMENTED",ss[ss.INTERNAL=13]="INTERNAL",ss[ss.UNAVAILABLE=14]="UNAVAILABLE",ss[ss.DATA_LOSS=15]="DATA_LOSS";var fs=function(){function t(t,e){this.comparator=t,this.root=e||ps.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ps.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ps.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new ds(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new ds(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new ds(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new ds(this.root,t,this.comparator,!0)},t}(),ds=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),ps=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Zr();if(this.right.isRed())throw Zr();var t=this.left.check();if(t!==this.right.check())throw Zr();return t+(this.isRed()?0:1)},t}();ps.EMPTY=null,ps.RED=!0,ps.BLACK=!1,ps.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Zr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Zr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Zr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Zr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Zr()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new ps(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var ys=function(){function t(t){this.comparator=t,this.data=new fs(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new gs(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new gs(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),gs=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),vs=new fs(Ai.comparator);function ms(){return vs}var bs=new fs(Ai.comparator);function ws(){return bs}var Ts=new fs(Ai.comparator);function Is(){return Ts}var Es=new ys(Ai.comparator);function Os(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Es,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Ss=new ys(ri);function Ds(){return Ss}var As=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,ks.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(ai.min(),r,Ds(),ms(),Os())},t}(),ks=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(gi.EMPTY_BYTE_STRING,n,Os(),Os(),Os())},t}(),Ns=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},_s=function(t,e){this.targetId=t,this.V=e},Cs=function(t,e,n,r){void 0===n&&(n=gi.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},js=function(){function t(){this.S=0,this.D=Ps(),this.C=gi.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Os(),e=Os(),n=Os();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Zr()}}),new ks(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Ps()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),xs=function(){function t(t){this.W=t,this.G=new Map,this.H=ms(),this.J=Rs(),this.Y=new ys(ri)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:Zr()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Yi(i))if(0===n){var o=new Ai(i.path);this.tt(e,o,Gi.newNoDocument(o,ai.min()))}else $r(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&Yi(o.target)){var s=new Ai(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,Gi.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}});var r=Os();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new As(t,n,this.Y,this.H,r);return this.H=ms(),this.J=Rs(),this.Y=new ys(ri),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new js,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new ys(ri),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Wr("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new js),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Rs(){return new fs(Ai.comparator)}function Ps(){return new fs(Ai.comparator)}var Ls={asc:"ASCENDING",desc:"DESCENDING"},Ms={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Fs=function(t,e){this.databaseId=t,this.I=e};function Us(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Vs(t,e){return t.I?e.toBase64():e.toUint8Array()}function qs(t,e){return Us(t,e.toTimestamp())}function Bs(t){return $r(!!t),ai.fromTimestamp(function(t){var e=mi(t);return new si(e.seconds,e.nanos)}(t))}function Ks(t,e){return function(t){return new fi(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Gs(t){var e=fi.fromString(t);return $r(pa(e)),e}function zs(t,e){return Ks(t.databaseId,e.path)}function Hs(t,e){var n=Gs(e);if(n.get(1)!==t.databaseId.projectId)throw new zr(Gr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new zr(Gr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ai(Xs(n))}function Qs(t,e){return Ks(t.databaseId,e)}function Ws(t){var e=Gs(t);return 4===e.length?fi.emptyPath():Xs(e)}function Ys(t){return new fi(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Xs(t){return $r(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Js(t,e,n){return{name:zs(t,e),fields:n.value.mapValue.fields}}function Zs(t,e,n){var r=Hs(t,e.name),i=Bs(e.updateTime),o=new Bi({mapValue:{fields:e.fields}}),s=Gi.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function $s(t,e){var n;if(e instanceof ts)n={update:Js(t,e.key,e.value)};else if(e instanceof as)n={delete:zs(t,e.key)};else if(e instanceof es)n={update:Js(t,e.key,e.data),updateMask:da(e.fieldMask)};else{if(!(e instanceof us))return Zr();n={verify:zs(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Lo)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Mo)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Uo)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof qo)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Zr()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:qs(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Zr()}(t,e.precondition)),n}function ta(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Ho.updateTime(Bs(t.updateTime)):void 0!==t.exists?Ho.exists(t.exists):Ho.none()}(e.currentDocument):Ho.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?($r("REQUEST_TIME"===e.setToServerValue),n=new Lo):"appendMissingElements"in e?n=new Mo(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Uo(e.removeAllFromArray.values||[]):"increment"in e?n=new qo(t,e.increment):Zr();var r=pi.fromServerFormat(e.fieldPath);return new Go(r,n)}(t,e)}):[];if(e.update){var i=Hs(t,e.update.name),o=new Bi({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new yi((t.fieldPaths||[]).map(function(t){return pi.fromServerFormat(t)}))}(e.updateMask);return new es(i,o,s,n,r)}return new ts(i,o,n,r)}if(e.delete){var a=Hs(t,e.delete);return new as(a,n)}if(e.verify){var u=Hs(t,e.verify);return new us(u,n)}return Zr()}function ea(t,e){return{documents:[Qs(t,e.path)]}}function na(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Qs(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Qs(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Ui(t.value))return{unaryFilter:{field:ca(t.field),op:"IS_NAN"}};if(Fi(t.value))return{unaryFilter:{field:ca(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Ui(t.value))return{unaryFilter:{field:ca(t.field),op:"IS_NOT_NAN"}};if(Fi(t.value))return{unaryFilter:{field:ca(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ca(t.field),op:ua(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:ca(t.field),direction:aa(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||Oi(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=oa(e.startAt)),e.endAt&&(n.structuredQuery.endAt=oa(e.endAt)),n}function ra(t){var e=Ws(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){$r(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=ia(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new ao(ha(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return Oi(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=sa(n.startAt));var h=null;return n.endAt&&(h=sa(n.endAt)),fo(e,i,a,s,u,"F",c,h)}function ia(t){return t?void 0!==t.unaryFilter?[fa(t)]:void 0!==t.fieldFilter?[la(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return ia(t)}).reduce(function(t,e){return t.concat(e)}):Zr():[]}function oa(t){return{before:t.before,values:t.position}}function sa(t){return new oo(t.values||[],!!t.before)}function aa(t){return Ls[t]}function ua(t){return Ms[t]}function ca(t){return{fieldPath:t.canonicalString()}}function ha(t){return pi.fromServerFormat(t.fieldPath)}function la(t){return Xi.create(ha(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Zr()}}(t.fieldFilter.op),t.fieldFilter.value)}function fa(t){switch(t.unaryFilter.op){case"IS_NAN":var e=ha(t.unaryFilter.field);return Xi.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=ha(t.unaryFilter.field);return Xi.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=ha(t.unaryFilter.field);return Xi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=ha(t.unaryFilter.field);return Xi.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Zr()}}function da(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function pa(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function ya(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=va(e)),e=ga(t.get(n),e);return va(e)}function ga(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function va(t){return t+"\x01\x01"}function ma(t){var e=t.length;if($r(e>=2),2===e)return $r("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),fi.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&Zr(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Zr()}o=s+2}return new fi(r)}var ba=function(t,e){this.seconds=t,this.nanoseconds=e},wa=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};wa.store="owner",wa.key="owner";var Ta=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Ta.store="mutationQueues",Ta.keyPath="userId";var Ia=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Ia.store="mutations",Ia.keyPath="batchId",Ia.userMutationsIndex="userMutationsIndex",Ia.userMutationsKeyPath=["userId","batchId"];var Ea=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,ya(e)]},t.key=function(t,e,n){return[t,ya(e),n]},t}();Ea.store="documentMutations",Ea.PLACEHOLDER=new Ea;var Oa=function(t,e){this.path=t,this.readTime=e},Sa=function(t,e){this.path=t,this.version=e},Da=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Da.store="remoteDocuments",Da.readTimeIndex="readTimeIndex",Da.readTimeIndexPath="readTime",Da.collectionReadTimeIndex="collectionReadTimeIndex",Da.collectionReadTimeIndexPath=["parentPath","readTime"];var Aa=function(t){this.byteSize=t};Aa.store="remoteDocumentGlobal",Aa.key="remoteDocumentGlobalKey";var ka=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};ka.store="targets",ka.keyPath="targetId",ka.queryTargetsIndexName="queryTargetsIndex",ka.queryTargetsKeyPath=["canonicalId","targetId"];var Na=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Na.store="targetDocuments",Na.keyPath=["targetId","path"],Na.documentTargetsIndex="documentTargetsIndex",Na.documentTargetsKeyPath=["path","targetId"];var _a=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};_a.key="targetGlobalKey",_a.store="targetGlobal";var Ca=function(t,e){this.collectionId=t,this.parent=e};Ca.store="collectionParents",Ca.keyPath=["collectionId","parent"];var ja=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};ja.store="clientMetadata",ja.keyPath="clientId";var xa=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};xa.store="bundles",xa.keyPath="bundleId";var Ra=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Ra.store="namedQueries",Ra.keyPath="name";var Pa=Object(Br.f)(Object(Br.f)([],Object(Br.f)(Object(Br.f)([],Object(Br.f)(Object(Br.f)([],Object(Br.f)(Object(Br.f)([],[Ta.store,Ia.store,Ea.store,Da.store,ka.store,wa.store,_a.store,Na.store]),[ja.store])),[Aa.store])),[Ca.store])),[xa.store,Ra.store]),La="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ma=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),Fa=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Ua=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Zr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Va=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Fa,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Ka(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Wa(e.target.error);n.ft.reject(new Ka(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Ka(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Wr("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new za(e)},t}(),qa=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Object(C.i)())&&Yr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Wr("SimpleDb","Removing database:",t),Ha(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Object(C.i)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Object(Br.b)(this,void 0,void 0,function(){var e,n=this;return Object(Br.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Wr("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Ka(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new zr(Gr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Ka(t,n))},i.onupgradeneeded=function(t){Wr("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Wr("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(Br.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(Br.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,h;return Object(Br.d)(this,function(l){switch(l.label){case 0:++o,l.label=1;case 1:return l.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=l.sent(),e=Va.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),Ua.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(l.sent(),s),u)];case 4:return Wr("SimpleDb","Transaction failed with error:",(c=l.sent()).message,"Retrying:",h="FirebaseError"!==c.name&&o<3),a.close(),h?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Ba=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Ha(this.Pt.delete())},t}(),Ka=function(t){function e(e,n){var r=this;return(r=t.call(this,Gr.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(Br.c)(e,t),e}(zr);function Ga(t){return"IndexedDbTransactionError"===t.name}var za=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Wr("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Wr("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Ha(n)},t.prototype.add=function(t){return Wr("SimpleDb","ADD",this.store.name,t,t),Ha(this.store.add(t))},t.prototype.get=function(t){var e=this;return Ha(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Wr("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Wr("SimpleDb","DELETE",this.store.name,t),Ha(this.store.delete(t))},t.prototype.count=function(){return Wr("SimpleDb","COUNT",this.store.name),Ha(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){Wr("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new Ua(function(n,r){e.onerror=function(t){var e=Wa(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new Ua(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Ba(i),s=e(i.primaryKey,i.value,o);if(s instanceof Ua){var a=s.catch(function(t){return o.done(),Ua.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return Ua.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Ha(t){return new Ua(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Wa(t.target.error);n(e)}})}var Qa=!1;function Wa(t){var e=qa._t(Object(C.i)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new zr("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Qa||(Qa=!0,setTimeout(function(){throw r},0)),r}}return t}var Ya=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(Br.c)(e,t),e}(Ma);function Xa(t,e){var n=ti(t);return qa.It(n.Mt,e)}var Ja=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Yo(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Xo(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Xo(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(ai.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Os())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&ii(this.mutations,t.mutations,function(t,e){return Zo(t,e)})&&ii(this.baseMutations,t.baseMutations,function(t,e){return Zo(t,e)})},t}(),Za=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){$r(e.mutations.length===r.length);for(var i=Is(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),$a=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=ai.min()),void 0===o&&(o=ai.min()),void 0===s&&(s=gi.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),tu=function(t){this.Lt=t};function eu(t,e){if(e.document)return Zs(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Ai.fromSegments(e.noDocument.path),r=su(e.noDocument.readTime),i=Gi.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=Ai.fromSegments(e.unknownDocument.path);return r=su(e.unknownDocument.version),Gi.newUnknownDocument(o,r)}return Zr()}function nu(t,e,n){var r=ru(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:zs(t,e.key),fields:e.data.value.mapValue.fields,updateTime:Us(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new Da(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=ou(e.version);return s=e.hasCommittedMutations,new Da(null,new Oa(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),h=ou(e.version);return new Da(new Sa(c,h),null,null,!0,r,i)}return Zr()}function ru(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function iu(t){var e=new si(t[0],t[1]);return ai.fromTimestamp(e)}function ou(t){var e=t.toTimestamp();return new ba(e.seconds,e.nanoseconds)}function su(t){var e=new si(t.seconds,t.nanoseconds);return ai.fromTimestamp(e)}function au(t,e){for(var n=(e.baseMutations||[]).map(function(e){return ta(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return ta(t.Lt,e)}),o=si.fromMillis(e.localWriteTimeMs);return new Ja(e.batchId,o,n,i)}function uu(t){var e,n,r=su(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?su(t.lastLimboFreeSnapshotVersion):ai.min();return void 0!==t.query.documents?($r(1===(n=t.query).documents.length),e=To(po(Ws(n.documents[0])))):e=function(t){return To(ra(t))}(t.query),new $a(e,t.targetId,0,t.lastListenSequenceNumber,r,i,gi.fromBase64String(t.resumeToken))}function cu(t,e){var n,r=ou(e.snapshotVersion),i=ou(e.lastLimboFreeSnapshotVersion);n=Yi(e.target)?ea(t.Lt,e.target):na(t.Lt,e.target);var o=e.resumeToken.toBase64();return new ka(e.targetId,Qi(e.target),r,o,e.sequenceNumber,i,n)}function hu(t){var e=ra({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Io(e,e.limit,"L"):e}var lu=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return fu(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:su(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return fu(t).put({bundleId:(n=e).id,createTime:ou(Bs(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return du(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:hu(e.bundledQuery),readTime:su(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return du(t).put(function(t){return{name:t.name,readTime:ou(Bs(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function fu(t){return Xa(t,xa.store)}function du(t){return Xa(t,Ra.store)}var pu=function(){function t(){this.Bt=new yu}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Ua.resolve()},t.prototype.getCollectionParents=function(t,e){return Ua.resolve(this.Bt.getEntries(e))},t}(),yu=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new ys(fi.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new ys(fi.comparator)).toArray()},t}(),gu=function(){function t(){this.qt=new yu}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:ya(i)};return vu(t).put(o)}return Ua.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[oi(e),""],!1,!0);return vu(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(ma(o.parent))}return n})},t}();function vu(t){return Xa(t,Ca.store)}var mu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},bu=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function wu(t,e,n){var r=t.store(Ia.store),i=t.store(Ea.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){$r(1===a)}));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],d=Ea.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return Ua.waitFor(o).next(function(){return c})}function Tu(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Zr();e=t.noDocument}return JSON.stringify(e).length}bu.DEFAULT_COLLECTION_PERCENTILE=10,bu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bu.DEFAULT=new bu(41943040,bu.DEFAULT_COLLECTION_PERCENTILE,bu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bu.DISABLED=new bu(-1,0,0);var Iu=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return $r(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ou(t).$t({index:Ia.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Su(t),s=Ou(t);return s.add({}).next(function(a){$r("number"==typeof a);for(var u=new Ja(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return $s(t.Lt,e)}),i=n.mutations.map(function(e){return $s(t.Lt,e)});return new Ia(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),h=[],l=new ys(function(t,e){return ri(t.canonicalString(),e.canonicalString())}),f=0,d=r;f<d.length;f++){var p=d[f],y=Ea.key(i.userId,p.key.path,a);l=l.add(p.key.path.popLast()),h.push(s.put(c)),h.push(o.put(y,Ea.PLACEHOLDER))}return l.forEach(function(e){h.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Qt[a]=u.keys()}),Ua.waitFor(h).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Ou(t).get(e).next(function(t){return t?($r(t.userId===n.userId),au(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?Ua.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Ou(t).$t({index:Ia.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&($r(e.batchId>=r),o=au(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Ou(t).$t({index:Ia.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ou(t).Nt(Ia.userMutationsIndex,n).next(function(t){return t.map(function(t){return au(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Ea.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Su(t).$t({range:i},function(r,i,s){var a=r[0],u=r[2],c=ma(r[1]);if(a===n.userId&&e.path.isEqual(c))return Ou(t).get(u).next(function(t){if(!t)throw Zr();$r(t.userId===n.userId),o.push(au(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new ys(ri),i=[];return e.forEach(function(e){var o=Ea.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Su(t).$t({range:s},function(t,i,o){var s=t[0],a=t[2],u=ma(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),Ua.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Ea.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new ys(ri);return Su(t).$t({range:s},function(t,e,o){var s=t[0],u=t[2],c=ma(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(Ou(t).get(e).next(function(t){if(null===t)throw Zr();$r(t.userId===n.userId),r.push(au(n.R,t))}))}),Ua.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return wu(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),Ua.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Ua.resolve();var r=IDBKeyRange.lowerBound(Ea.prefixForUser(e.userId)),i=[];return Su(t).$t({range:r},function(t,n,r){if(t[0]===e.userId){var o=ma(t[1]);i.push(o)}else r.done()}).next(function(){$r(0===i.length)})})},t.prototype.containsKey=function(t,e){return Eu(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return Du(t).get(this.userId).next(function(t){return t||new Ta(e.userId,-1,"")})},t}();function Eu(t,e,n){var r=Ea.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Su(t).$t({range:o,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function Ou(t){return Xa(t,Ia.store)}function Su(t){return Xa(t,Ea.store)}function Du(t){return Xa(t,Ta.store)}var Au=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),ku=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new Au(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return ai.fromTimestamp(new si(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return Nu(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return $r(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Nu(t).$t(function(s,a){var u=uu(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return Ua.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return Nu(t).$t(function(t,n){var r=uu(n);e(r)})},t.prototype.Xt=function(t){return _u(t).get(_a.key).next(function(t){return $r(null!==t),t})},t.prototype.Zt=function(t,e){return _u(t).put(_a.key,e)},t.prototype.te=function(t,e){return Nu(t).put(cu(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=Qi(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Nu(t).$t({range:r,index:ka.queryTargetsIndexName},function(t,n,r){var o=uu(n);Wi(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Cu(t);return e.forEach(function(e){var s=ya(e.path);i.push(o.put(new Na(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),Ua.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Cu(t);return Ua.forEach(e,function(e){var o=ya(e.path);return Ua.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Cu(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Cu(t),i=Os();return r.$t({range:n,kt:!0},function(t,e,n){var r=ma(t[1]),o=new Ai(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=ya(e.path),r=IDBKeyRange.bound([n],[oi(n)],!1,!0),i=0;return Cu(t).$t({index:Na.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return Nu(t).get(e).next(function(t){return t?uu(t):null})},t}();function Nu(t){return Xa(t,ka.store)}function _u(t){return Xa(t,_a.store)}function Cu(t){return Xa(t,Na.store)}function ju(t){return Object(Br.b)(this,void 0,void 0,function(){return Object(Br.d)(this,function(e){if(t.code!==Gr.FAILED_PRECONDITION||t.message!==La)throw t;return Wr("LocalStore","Unexpectedly lost primary lease"),[2]})})}function xu(t,e){var n=t[1],r=e[1],i=ri(t[0],e[0]);return 0===i?ri(n,r):i}var Ru=function(){function t(t){this.ne=t,this.buffer=new ys(xu),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();xu(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Pu=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Wr("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return Object(Br.b)(e,void 0,void 0,function(){var e;return Object(Br.d)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Ga(e=n.sent())?(Wr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,ju(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),Lu=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Ua.resolve(Kr.o);var r=new Ru(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Wr("LruGarbageCollector","Garbage collection skipped; disabled"),Ua.resolve(mu)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(Wr("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),mu):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(Wr("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),Qr()<=j.a.DEBUG&&Wr("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-h)+"ms"),Ua.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),Mu=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Lu(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return Fu(t,n)},t.prototype.removeReference=function(t,e,n){return Fu(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Fu(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return Du(t).Ot(function(r){return Eu(t,r,e).next(function(t){return t&&(n=!0),Ua.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var u=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),Cu(t).delete([0,ya(s.path)])})});i.push(u)}}).next(function(){return Ua.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Fu(t,e)},t.prototype.we=function(t,e){var n,r=Cu(t),i=Kr.o;return r.$t({index:Na.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Kr.o&&e(new Ai(ma(n)),i),i=s,n=o):i=Kr.o}).next(function(){i!==Kr.o&&e(new Ai(ma(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Fu(t,e){return Cu(t).put(function(t,e){return new Na(0,ya(t.path),e)}(e,t.currentSequenceNumber))}var Uu=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){ci(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return hi(this.inner)},t}(),Vu=function(){function t(){this.changes=new Uu(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:ai.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Gi.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Ua.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),qu=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Gu(t).put(zu(e),n)},t.prototype.removeEntry=function(t,e){var n=Gu(t),r=zu(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return Gu(t).get(zu(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return Gu(t).get(zu(e)).next(function(t){return{document:n.ye(e,t),size:Tu(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=ms();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=ms(),i=new fs(Ai.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Tu(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Ua.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Gu(t).$t({range:r},function(t,e,r){for(var s=Ai.fromSegments(t);o&&Ai.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=ms(),o=e.path.length+1,s={};if(n.isEqual(ai.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=ru(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Da.collectionReadTimeIndex}return Gu(t).$t(s,function(t,n,s){if(t.length===o){var a=eu(r.R,n);e.path.isPrefixOf(a.key.path)?Do(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new Bu(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Ku(t).get(Aa.key).next(function(t){return $r(!!t),t})},t.prototype.me=function(t,e){return Ku(t).put(Aa.key,e)},t.prototype.ye=function(t,e){if(e){var n=eu(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(ai.min()))return n}return Gi.newInvalidDocument(t)},t}(),Bu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Uu(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(Br.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new ys(function(t,e){return ri(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=nu(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Tu(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var h=nu(e.Ie.R,Gi.newNoDocument(o,ai.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,h))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),Ua.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(Vu);function Ku(t){return Xa(t,Aa.store)}function Gu(t){return Xa(t,Da.store)}function zu(t){return t.path.toArray()}var Hu=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;$r(n<r&&n>=0&&r<=11);var o=new Va("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(wa.store)}(t),function(t){t.createObjectStore(Ta.store,{keyPath:Ta.keyPath}),t.createObjectStore(Ia.store,{keyPath:Ia.keyPath,autoIncrement:!0}).createIndex(Ia.userMutationsIndex,Ia.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Ea.store)}(t),Qu(t),function(t){t.createObjectStore(Da.store)}(t));var s=Ua.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Na.store),t.deleteObjectStore(ka.store),t.deleteObjectStore(_a.store)}(t),Qu(t)),s=s.next(function(){return function(t){var e=t.store(_a.store),n=new _a(0,0,ai.min().toTimestamp(),0);return e.put(_a.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(Ia.store).Nt().next(function(n){t.deleteObjectStore(Ia.store),t.createObjectStore(Ia.store,{keyPath:Ia.keyPath,autoIncrement:!0}).createIndex(Ia.userMutationsIndex,Ia.userMutationsKeyPath,{unique:!0});var r=e.store(Ia.store),i=n.map(function(t){return r.put(t)});return Ua.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(ja.store,{keyPath:ja.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(Aa.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Da.store);e.createIndex(Da.readTimeIndex,Da.readTimeIndexPath,{unique:!1}),e.createIndex(Da.collectionReadTimeIndex,Da.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(xa.store,{keyPath:xa.keyPath})}(t),function(t){t.createObjectStore(Ra.store,{keyPath:Ra.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(Da.store).$t(function(t,n){e+=Tu(n)}).next(function(){var n=new Aa(e);return t.store(Aa.store).put(Aa.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(Ta.store),r=t.store(Ia.store);return n.Nt().next(function(n){return Ua.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Ia.userMutationsIndex,i).next(function(r){return Ua.forEach(r,function(r){$r(r.userId===n.userId);var i=au(e.R,r);return wu(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(Na.store),n=t.store(Da.store);return t.store(_a.store).get(_a.key).next(function(t){var r=[];return n.$t(function(n,i){var o=new fi(n),s=function(t){return[0,ya(t)]}(o);r.push(e.get(s).next(function(n){return n?Ua.resolve():function(n){return e.put(new Na(0,ya(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return Ua.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(Ca.store,{keyPath:Ca.keyPath});var n=e.store(Ca.store),r=new yu,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:ya(i)})}};return e.store(Da.store).$t({kt:!0},function(t,e){var n=new fi(t);return i(n.popLast())}).next(function(){return e.store(Ea.store).$t({kt:!0},function(t,e){var n=ma(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(ka.store);return n.$t(function(t,r){var i=uu(r),o=cu(e.R,i);return n.put(o)})},t}();function Qu(t){t.createObjectStore(Na.store,{keyPath:Na.keyPath}).createIndex(Na.documentTargetsIndex,Na.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(ka.store,{keyPath:ka.keyPath}).createIndex(ka.queryTargetsIndexName,ka.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(_a.store)}var Wu="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Yu=function(){function t(e,n,r,i,o,s,a,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=h,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new zr(Gr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Mu(this,i),this.Le=n+"main",this.R=new tu(u),this.Be=new qa(this.Le,11,new Hu(this.R)),this.qe=new ku(this.referenceDelegate,this.R),this.Ut=new gu,this.Ue=function(t,e){return new qu(t,e)}(this.R,this.Ut),this.Qe=new lu,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===h&&Yr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new zr(Gr.FAILED_PRECONDITION,Wu);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new Kr(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(Br.b)(e,void 0,void 0,function(){return Object(Br.d)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return Object(Br.b)(e,void 0,void 0,function(){return Object(Br.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return Object(Br.b)(e,void 0,void 0,function(){return Object(Br.d)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Ju(e).put(new ja(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(Ga(e))return Wr("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Wr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return Xu(t).get(wa.key).next(function(t){return Ua.resolve(e.tn(t))})},t.prototype.en=function(t){return Ju(t).delete(this.clientId)},t.prototype.nn=function(){return Object(Br.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(Br.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=Xa(t,ja.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Ua.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)this.Ke.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Ua.resolve(!0):Xu(t).get(wa.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new zr(Gr.FAILED_PRECONDITION,Wu);return!1}}return!(!e.networkEnabled||!e.inForeground)||Ju(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Wr("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return Object(Br.b)(this,void 0,void 0,function(){var t=this;return Object(Br.d)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[wa.store,ja.store],function(e){var n=new Ya(e,Kr.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return Ju(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Iu.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Wr("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",Pa,function(o){return r=new Ya(o,i.Ne?i.Ne.next():Kr.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw Yr("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new zr(Gr.FAILED_PRECONDITION,La);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return Xu(t).get(wa.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new zr(Gr.FAILED_PRECONDITION,Wu)})},t.prototype.Ze=function(t){var e=new wa(this.clientId,this.allowTabSynchronization,Date.now());return Xu(t).put(wa.key,e)},t.yt=function(){return qa.yt()},t.prototype.Xe=function(t){var e=this,n=Xu(t);return n.get(wa.key).next(function(t){return e.tn(t)?(Wr("IndexedDbPersistence","Releasing primary lease."),n.delete(wa.key)):Ua.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Yr("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return Wr("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Yr("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Yr("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Xu(t){return Xa(t,wa.store)}function Ju(t){return Xa(t,ja.store)}function Zu(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var $u=function(t,e){this.progress=t,this.wn=e},tc=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return Ai.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):bo(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new Ai(e)).next(function(t){var e=ws();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=ws();return this.Ut.getCollectionParents(t,i).next(function(s){return Ua.forEach(s,function(s){var a=function(t,e){return new lo(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,h=r.get(c);null==h&&(h=Gi.newInvalidDocument(c),r=r.insert(c,h)),Xo(u,h,o.localWriteTime),h.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){Do(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=Os(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof es&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),ec=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Os(),i=Os(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),nc=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(ai.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(yo(e)||go(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(Qr()<=j.a.DEBUG&&Wr("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),So(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new ys(Ao(t));return e.forEach(function(e,r){Do(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Qr()<=j.a.DEBUG&&Wr("QueryEngine","Using full collection scan to execute query:",So(e)),this.Sn.getDocumentsMatchingQuery(t,e,ai.min())},t}(),rc=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new fs(ri),this.kn=new Uu(function(t){return Qi(t)},Wi),this.$n=ai.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new tc(this.On,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function ic(t,e,n,r){return new rc(t,e,n,r)}function oc(t,e){return Object(Br.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Br.d)(this,function(s){switch(s.label){case 0:return n=ti(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new tc(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=Os(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++)s=s.add(l[h].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var y=0,g=p.mutations;y<g.length;y++)s=s.add(g[y].key)}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function sc(t,e){var n=ti(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Ua.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);$r(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function ac(t){var e=ti(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function uc(t,e){var n=ti(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return $r(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}});var a=ms();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(cc(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(ai.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return Ua.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function cc(t,e,n,r,i){var o=Os();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=ms();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(ai.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Wr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function hc(t,e){var n=ti(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function lc(t,e){var n=ti(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?Ua.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new $a(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function fc(t,e,n){return Object(Br.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Br.d)(this,function(a){switch(a.label){case 0:r=ti(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Ga(s=a.sent()))throw s;return Wr("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function dc(t,e,n){var r=ti(t),i=ai.min(),o=Os();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=ti(t),i=r.kn.get(n);return void 0!==i?Ua.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,To(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:ai.min(),n?o:Os())}).next(function(t){return{documents:t,Bn:o}})})}function pc(t,e){var n=ti(t),r=ti(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function yc(t){var e=ti(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=ti(t),i=ms(),o=ru(n),s=Gu(e),a=IDBKeyRange.lowerBound(o,!0);return s.$t({index:Da.readTimeIndex,range:a},function(t,e){var n=eu(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:iu(o)}})}(e.On,t,e.$n)}).then(function(t){var n=t.wn;return e.$n=t.readTime,n})}function gc(t){return Object(Br.b)(this,void 0,void 0,function(){var e;return Object(Br.d)(this,function(n){return[2,(e=ti(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Gu(t),n=ai.min();return e.$t({index:Da.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=iu(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.$n=t})]})})}function vc(t,e,n,r){return Object(Br.b)(this,void 0,void 0,function(){var i,o,s,a,u,c,h,l,f,d;return Object(Br.d)(this,function(p){switch(p.label){case 0:for(i=ti(t),o=Os(),s=ms(),a=Is(),u=0,c=n;u<c.length;u++)l=e.qn((h=c[u]).metadata.name),h.document&&(o=o.add(l)),s=s.insert(l,e.Un(h)),a=a.insert(l,e.Qn(h.metadata.readTime));return f=i.On.newChangeBuffer({trackRemovals:!0}),[4,lc(i,function(t){return To(po(fi.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return cc(t,f,s,ai.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next(function(){return i.qe.addMatchingKeys(t,o,d.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function mc(t,e,n){return void 0===n&&(n=Os()),Object(Br.b)(this,void 0,void 0,function(){var r,i;return Object(Br.d)(this,function(o){switch(o.label){case 0:return[4,lc(t,To(hu(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=ti(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=Bs(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var s=r.withResumeToken(gi.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Qe.saveNamedQuery(t,e)})})]}})})}var bc=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Ua.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:Bs(n.createTime)}),Ua.resolve()},t.prototype.getNamedQuery=function(t,e){return Ua.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:hu(t.bundledQuery),readTime:Bs(t.readTime)}}(e)),Ua.resolve()},t}(),wc=function(){function t(){this.Wn=new ys(Tc.Gn),this.zn=new ys(Tc.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Tc(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new Tc(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new Ai(new fi([])),r=new Tc(n,t),i=new Tc(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new Ai(new fi([])),n=new Tc(e,t),r=new Tc(e,t+1),i=Os();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new Tc(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Tc=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return Ai.comparator(t.key,e.key)||ri(t.ns,e.ns)},t.Hn=function(t,e){return ri(t.ns,e.ns)||Ai.comparator(t.key,e.key)},t}(),Ic=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new ys(Tc.Gn)}return t.prototype.checkEmpty=function(t){return Ua.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new Ja(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new Tc(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Ua.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Ua.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return Ua.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Ua.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Ua.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Tc(e,0),i=new Tc(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),Ua.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new ys(ri);return e.forEach(function(t){var e=new Tc(t,0),i=new Tc(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),Ua.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Ai.isDocumentKey(i)||(i=i.child(""));var o=new Tc(new Ai(i),0),s=new ys(ri);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),Ua.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;$r(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Ua.forEach(e.mutations,function(i){var o=new Tc(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Tc(e,0),r=this.rs.firstAfterOrEqual(n);return Ua.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return Ua.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Ec=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new fs(Ai.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Ua.resolve(n?n.document.clone():Gi.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=ms();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Gi.newInvalidDocument(t))}),Ua.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=ms(),i=new Ai(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||Do(e,u)&&(r=r.insert(u.key,u.clone()))}return Ua.resolve(r)},t.prototype.fs=function(t,e){return Ua.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new Oc(this)},t.prototype.getSize=function(t){return Ua.resolve(this.size)},t}(),Oc=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(Br.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),Ua.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Vu),Sc=function(){function t(t){this.persistence=t,this.ds=new Uu(function(t){return Qi(t)},Wi),this.lastRemoteSnapshotVersion=ai.min(),this.highestTargetId=0,this.ws=0,this._s=new wc,this.targetCount=0,this.ys=Au.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),Ua.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Ua.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Ua.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Ua.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Ua.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Au(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Ua.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Ua.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Ua.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Ua.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return Ua.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Ua.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Ua.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),Ua.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Ua.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Ua.resolve(n)},t.prototype.containsKey=function(t,e){return Ua.resolve(this._s.containsKey(e))},t}(),Dc=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Kr(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Sc(this),this.Ut=new pu,this.Ue=function(t,e){return new Ec(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new tu(e),this.Qe=new bc(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Ic(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;Wr("MemoryPersistence","Starting transaction:",t);var i=new Ac(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return Ua.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),Ac=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(Br.c)(e,t),e}(Ma),kc=function(){function t(t){this.persistence=t,this.As=new wc,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Zr()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Ua.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Ua.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Ua.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ua.forEach(this.vs,function(r){var i=Ai.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Ua.or([function(){return Ua.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Nc=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function _c(t,e){return"firestore_clients_"+t+"_"+e}function Cc(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function jc(t,e){return"firestore_targets_"+t+"_"+e}Nc.UNAUTHENTICATED=new Nc(null),Nc.GOOGLE_CREDENTIALS=new Nc("google-credentials-uid"),Nc.FIRST_PARTY=new Nc("first-party-uid");var xc=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new zr(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Yr("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Rc=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new zr(i.error.code,i.error.message)),o?new t(e,i.state,r):(Yr("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Pc=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Ds(),s=0;i&&s<r.activeTargetIds.length;++s)i=Di(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Yr("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Lc=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Yr("SharedClientState","Failed to parse online state: "+e),null)},t}(),Mc=function(){function t(){this.activeTargetIds=Ds()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Fc=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new fs(ri),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=_c(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new Mc),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(Br.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,h=this;return Object(Br.d)(this,function(l){switch(l.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=l.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(_c(this.persistenceKey,r)))&&(o=Pc.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)this.Fs(c[u]);return this.$s=[],this.window.addEventListener("pagehide",function(){return h.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(jc(this.persistenceKey,t));if(n){var r=Rc.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(jc(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Wr("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Wr("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Wr("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Wr("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void Yr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return Object(Br.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(Br.d)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=Kr.o;if(null!=t)try{var n=JSON.parse(t);$r("number"==typeof n),e=n}catch(t){Yr("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Kr.o&&this.sequenceNumberHandler(s);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new xc(this.currentUser,t,e,n),i=Cc(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Cc(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=jc(this.persistenceKey,t),i=new Rc(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Pc.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return xc.Vs(new Nc(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Rc.Vs(r,e)},t.prototype.js=function(t){return Lc.Vs(t)},t.prototype.ii=function(t){return Object(Br.b)(this,void 0,void 0,function(){return Object(Br.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Wr("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Ds();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),Uc=function(){function t(){this.li=new Mc,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Mc,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Vc=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),qc=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Wr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Wr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Bc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Kc=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Gc=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return Object(Br.c)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var s=new qr;s.listenOnce(Mr.COMPLETE,function(){try{switch(s.getLastErrorCode()){case Lr.NO_ERROR:var e=s.getResponseJson();Wr("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Lr.TIMEOUT:Wr("Connection",'RPC "'+t+'" timed out'),o(new zr(Gr.DEADLINE_EXCEEDED,"Request time out"));break;case Lr.HTTP_ERROR:var n=s.getStatus();if(Wr("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Gr).indexOf(e)>=0?e:Gr.UNKNOWN}(r.status);o(new zr(a,r.message))}else o(new zr(Gr.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new zr(Gr.UNAVAILABLE,"Connection failed."));break;default:Zr()}}finally{Wr("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Sr,i=Ae(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Ur({})),this.Fi(o.initMessageHeaders,e),Object(C.n)()||Object(C.p)()||Object(C.l)()||Object(C.m)()||Object(C.q)()||Object(C.k)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Wr("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,h=new Kc({Ei:function(t){c?Wr("Connection","Not sending because WebChannel is closed:",t):(u||(Wr("Connection","Opening WebChannel transport."),a.open(),u=!0),Wr("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),l=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return l(a,Vr.EventType.OPEN,function(){c||Wr("Connection","WebChannel transport opened.")}),l(a,Vr.EventType.CLOSE,function(){c||(c=!0,Wr("Connection","WebChannel transport closed"),h.Vi())}),l(a,Vr.EventType.ERROR,function(t){c||(c=!0,Xr("Connection","WebChannel transport errored:",t),h.Vi(new zr(Gr.UNAVAILABLE,"The operation could not be completed")))}),l(a,Vr.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];$r(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Wr("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=os[t];if(void 0!==e)return ls(e)}(i),s=r.message;void 0===o&&(o=Gr.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,h.Vi(new zr(o,s)),a.close()}else Wr("Connection","WebChannel received:",n),h.Si(n)}}),l(i,Fr.STAT_EVENT,function(t){10===t.stat?Wr("Connection","Detected buffering proxy"):11===t.stat&&Wr("Connection","Detected no buffering proxy")}),setTimeout(function(){h.Pi()},0),h},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Wr("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return Wr("RestConnection","Received: ",t),t},function(e){throw Xr("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.6.8",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+Bc[t]},t}());function zc(){return"undefined"!=typeof window?window:null}function Hc(){return"undefined"!=typeof document?document:null}function Qc(t){return new Fs(t,!0)}var Wc=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&Wr("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Qi=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Yc=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Wc(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(Br.b)(this,void 0,void 0,function(){return Object(Br.d)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Object(Br.b)(this,void 0,void 0,function(){return Object(Br.d)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(Br.b)(this,void 0,void 0,function(){return Object(Br.d)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Gr.RESOURCE_EXHAUSTED?(Yr(e.toString()),Yr("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===Gr.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new zr(Gr.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return Object(Br.b)(t,void 0,void 0,function(){return Object(Br.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return Wr("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(Wr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),Xc=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return Object(Br.c)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Zr()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?($r(void 0===e||"string"==typeof e),gi.fromBase64String(e||"")):($r(void 0===e||e instanceof Uint8Array),gi.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Gr.UNKNOWN:ls(t.code);return new zr(e,t.message||"")}(a);n=new Cs(r,i,o,s||null)}else if("documentChange"in e){i=Hs(t,(r=e.documentChange).document.name),o=Bs(r.document.updateTime);var a=new Bi({mapValue:{fields:r.document.fields}}),u=(s=Gi.newFoundDocument(i,o,a),r.targetIds||[]);n=new Ns(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Hs(t,(r=e.documentDelete).document),o=r.readTime?Bs(r.readTime):ai.min(),a=Gi.newNoDocument(i,o),n=new Ns([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Hs(t,(r=e.documentRemove).document),n=new Ns([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Zr();var c=e.filter;i=new cs(r=c.count||0),n=new _s(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return ai.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?ai.min():e.readTime?Bs(e.readTime):ai.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Ys(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Yi(r)?{documents:ea(t,r)}:{query:na(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Vs(t,e.resumeToken):e.snapshotVersion.compareTo(ai.min())>0&&(n.readTime=Us(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Zr()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Ys(this.R),e.removeTarget=t,this.cr(e)},e}(Yc),Jc=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return Object(Br.c)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if($r(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?($r(void 0!==e),t.map(function(t){return function(t,e){var n=Bs(t.updateTime?t.updateTime:e);return n.isEqual(ai.min())&&(n=Bs(e)),new zo(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Bs(t.commitTime);return this.listener.Tr(n,e)}return $r(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Ys(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return $s(e.R,t)})};this.cr(n)},e}(Yc),Zc=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(Br.c)(e,t),e.prototype.br=function(){if(this.Rr)throw new zr(Gr.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Gr.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new zr(Gr.UNKNOWN,t.toString())})},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.$i(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Gr.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new zr(Gr.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),$c=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Yr(e),this.Vr=!1):Wr("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),th=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return Object(Br.b)(o,void 0,void 0,function(){return Object(Br.d)(this,function(t){switch(t.label){case 0:return ch(this)?(Wr("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(Br.b)(this,void 0,void 0,function(){var e;return Object(Br.d)(this,function(n){switch(n.label){case 0:return(e=ti(t)).Or.add(4),[4,nh(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,eh(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new $c(n,r)};function eh(t){return Object(Br.b)(this,void 0,void 0,function(){var e,n;return Object(Br.d)(this,function(r){switch(r.label){case 0:if(!ch(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function nh(t){return Object(Br.b)(this,void 0,void 0,function(){var e,n;return Object(Br.d)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function rh(t,e){var n=ti(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),uh(n)?ah(n):Oh(n).er()&&oh(n,e))}function ih(t,e){var n=ti(t),r=Oh(n);n.$r.delete(e),r.er()&&sh(n,e),0===n.$r.size&&(r.er()?r.ir():ch(n)&&n.Br.set("Unknown"))}function oh(t,e){t.qr.U(e.targetId),Oh(t).mr(e)}function sh(t,e){t.qr.U(e),Oh(t).yr(e)}function ah(t){t.qr=new xs({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),Oh(t).start(),t.Br.Sr()}function uh(t){return ch(t)&&!Oh(t).tr()&&t.$r.size>0}function ch(t){return 0===ti(t).Or.size}function hh(t){t.qr=void 0}function lh(t){return Object(Br.b)(this,void 0,void 0,function(){return Object(Br.d)(this,function(e){return t.$r.forEach(function(e,n){oh(t,e)}),[2]})})}function fh(t,e){return Object(Br.b)(this,void 0,void 0,function(){return Object(Br.d)(this,function(n){return hh(t),uh(t)?(t.Br.Nr(e),ah(t)):t.Br.set("Unknown"),[2]})})}function dh(t,e,n){return Object(Br.b)(this,void 0,void 0,function(){var r,i,o;return Object(Br.d)(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof Cs&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(Br.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Br.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.$r.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.$r.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Wr("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,ph(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Ns?t.qr.X(e):e instanceof _s?t.qr.rt(e):t.qr.et(e),n.isEqual(ai.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,ac(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(gi.EMPTY_BYTE_STRING,n.snapshotVersion)),sh(t,e);var r=new $a(n.target,e,1,n.sequenceNumber);oh(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Wr("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,ph(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function ph(t,e,n){return Object(Br.b)(this,void 0,void 0,function(){var r=this;return Object(Br.d)(this,function(i){switch(i.label){case 0:if(!Ga(e))throw e;return t.Or.add(1),[4,nh(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return ac(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return Object(Br.b)(r,void 0,void 0,function(){return Object(Br.d)(this,function(e){switch(e.label){case 0:return Wr("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,eh(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function yh(t,e){return e().catch(function(n){return ph(t,n,e)})}function gh(t){return Object(Br.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(Br.d)(this,function(s){switch(s.label){case 0:e=ti(t),n=Sh(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return ch(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,hc(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Sh(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,ph(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return vh(e)&&mh(e),[2]}})})}function vh(t){return ch(t)&&!Sh(t).tr()&&t.kr.length>0}function mh(t){Sh(t).start()}function bh(t){return Object(Br.b)(this,void 0,void 0,function(){return Object(Br.d)(this,function(e){return Sh(t).Ar(),[2]})})}function wh(t){return Object(Br.b)(this,void 0,void 0,function(){var e,n,r;return Object(Br.d)(this,function(i){for(e=Sh(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function Th(t,e,n){return Object(Br.b)(this,void 0,void 0,function(){var r,i;return Object(Br.d)(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=Za.from(r,e,n),[4,yh(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,gh(t)];case 2:return o.sent(),[2]}})})}function Ih(t,e){return Object(Br.b)(this,void 0,void 0,function(){return Object(Br.d)(this,function(n){switch(n.label){case 0:return e&&Sh(t).pr?[4,function(t,e){return Object(Br.b)(this,void 0,void 0,function(){var n,r;return Object(Br.d)(this,function(i){switch(i.label){case 0:return hs(r=e.code)&&r!==Gr.ABORTED?(n=t.kr.shift(),Sh(t).sr(),[4,yh(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,gh(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return vh(t)&&mh(t),[2]}})})}function Eh(t,e){return Object(Br.b)(this,void 0,void 0,function(){var n;return Object(Br.d)(this,function(r){switch(r.label){case 0:return n=ti(t),e?(n.Or.delete(2),[4,eh(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,nh(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Oh(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=ti(t);return r.br(),new Xc(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:lh.bind(null,t),Ri:fh.bind(null,t),_r:dh.bind(null,t)}),t.Mr.push(function(n){return Object(Br.b)(e,void 0,void 0,function(){return Object(Br.d)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),uh(t)?ah(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),hh(t),e.label=3;case 3:return[2]}})})})),t.Ur}function Sh(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=ti(t);return r.br(),new Jc(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:bh.bind(null,t),Ri:Ih.bind(null,t),Ir:wh.bind(null,t),Tr:Th.bind(null,t)}),t.Mr.push(function(n){return Object(Br.b)(e,void 0,void 0,function(){return Object(Br.d)(this,function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,gh(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(Wr("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Qr}var Dh=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Fa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new zr(Gr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Ah(t,e){if(Yr("AsyncQueue",e+": "+t),Ga(t))return new zr(Gr.UNAVAILABLE,e+": "+t);throw t}var kh=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Ai.comparator(e.key,n.key)}:function(t,e){return Ai.comparator(t.key,e.key)},this.keyedMap=ws(),this.sortedSet=new fs(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Nh=function(){function t(){this.Kr=new fs(Ai.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):Zr():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),_h=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,kh.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Eo(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Ch=function(){this.Wr=void 0,this.listeners=[]},jh=function(){this.queries=new Uu(function(t){return Oo(t)},Eo),this.onlineState="Unknown",this.Gr=new Set};function xh(t,e){return Object(Br.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Br.d)(this,function(c){switch(c.label){case 0:if(n=ti(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new Ch),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=Ah(a,"Initialization of query '"+So(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&Mh(n),[2]}})})}function Rh(t,e){return Object(Br.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Br.d)(this,function(a){return n=ti(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function Ph(t,e){for(var n=ti(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&Mh(n)}function Lh(t,e,n){var r=ti(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Mh(t){t.Gr.forEach(function(t){t.next()})}var Fh=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new _h(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=_h.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Uh=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Vh=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Hs(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Zs(this.R,t.document,!1):Gi.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return Bs(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Vh(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],h=(e.get(c)||Os()).add(s);e.set(c,h)}}return e},t.prototype.complete=function(){return Object(Br.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(Br.d)(this,function(o){switch(o.label){case 0:return[4,vc(this.localStore,new Vh(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,mc(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new $u(Object.assign({},this.progress),t))]}})})}}();var qh=function(t){this.key=t},Bh=function(t){this.key=t},Kh=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Os(),this.mutatedKeys=Os(),this.lo=Ao(t),this.fo=new kh(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Nh,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=yo(this.query)&&i.size===this.query.limit?i.last():null,c=go(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var h=i.get(t),l=Do(n.query,e)?e:null,f=!!h&&n.mutatedKeys.has(h.key),d=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),p=!1;h&&l?h.data.isEqual(l.data)?f!==d&&(r.track({type:3,doc:l}),p=!0):n.yo(h,l)||(r.track({type:2,doc:l}),p=!0,(u&&n.lo(l,u)>0||c&&n.lo(l,c)<0)&&(a=!0)):!h&&l?(r.track({type:0,doc:l}),p=!0):h&&!l&&(r.track({type:1,doc:h}),p=!0,(u||c)&&(a=!0)),p&&(l?(s=s.add(l),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),yo(this.query)||go(this.query))for(;s.size>this.query.limit;){var h=yo(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Zr()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new _h(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Nh,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Os(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new Bh(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new qh(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Os();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return _h.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Gh=function(t,e,n){this.query=t,this.targetId=e,this.view=n},zh=function(t){this.key=t,this.bo=!1},Hh=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Uu(function(t){return Oo(t)},Eo),this.Vo=new Map,this.So=new Set,this.Do=new fs(Ai.comparator),this.Co=new Map,this.No=new wc,this.xo={},this.Fo=new Map,this.ko=Au.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function Qh(t,e){return Object(Br.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Br.d)(this,function(a){switch(a.label){case 0:return n=Il(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,lc(n.localStore,To(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,Wh(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&rh(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function Wh(t,e,n,r){return Object(Br.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(Br.d)(this,function(h){switch(h.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return Object(Br.b)(this,void 0,void 0,function(){var i,o,s;return Object(Br.d)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,dc(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(al(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,dc(t.localStore,e,!0)];case 1:return i=h.sent(),o=new Kh(e,i.Bn),s=o._o(i.documents),a=ks.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),al(t,n,u.To),c=new Gh(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function Yh(t,e){return Object(Br.b)(this,void 0,void 0,function(){var n,r,i;return Object(Br.d)(this,function(o){switch(o.label){case 0:return n=ti(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!Eo(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,fc(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),ih(n.remoteStore,r.targetId),ol(n,r.targetId)}).catch(ju)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return ol(n,r.targetId),[4,fc(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function Xh(t,e,n){return Object(Br.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Br.d)(this,function(a){switch(a.label){case 0:r=El(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=ti(t),i=si.now(),o=e.reduce(function(t,e){return t.add(e.key)},Os());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],h=Jo(c,n.get(c.key));null!=h&&s.push(new es(c.key,h,Ki(h.value.mapValue),Ho.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new fs(ri)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,hl(r,i.changes)];case 3:return a.sent(),[4,gh(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Ah(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function Jh(t,e){return Object(Br.b)(this,void 0,void 0,function(){var n,r;return Object(Br.d)(this,function(i){switch(i.label){case 0:n=ti(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,uc(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&($r(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?$r(r.bo):t.removedDocuments.size>0&&($r(r.bo),r.bo=!1))}),[4,hl(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,ju(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function Zh(t,e,n){var r=ti(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=ti(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&Mh(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function $h(t,e,n){return Object(Br.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(Br.d)(this,function(c){switch(c.label){case 0:return(r=ti(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new fs(Ai.comparator)).insert(o,Gi.newNoDocument(o,ai.min())),a=Os().add(o),u=new As(ai.min(),new Map,new ys(ri),s,a),[4,Jh(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),cl(r),[3,4];case 2:return[4,fc(r.localStore,e,!1).then(function(){return ol(r,e,n)}).catch(ju)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function tl(t,e){return Object(Br.b)(this,void 0,void 0,function(){var n,r,i;return Object(Br.d)(this,function(o){switch(o.label){case 0:n=ti(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,sc(n.localStore,e)];case 2:return i=o.sent(),il(n,r,null),rl(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,hl(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,ju(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function el(t,e,n){return Object(Br.b)(this,void 0,void 0,function(){var r,i;return Object(Br.d)(this,function(o){switch(o.label){case 0:r=ti(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=ti(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return $r(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),il(r,e,n),rl(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,hl(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,ju(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function nl(t,e){return Object(Br.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Br.d)(this,function(a){switch(a.label){case 0:ch((n=ti(t)).remoteStore)||Wr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=ti(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=Ah(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function rl(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function il(t,e,n){var r=ti(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function ol(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||sl(t,e)})}function sl(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(ih(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),cl(t))}function al(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof qh?(t.No.addReference(o.key,e),ul(t,o)):o instanceof Bh?(Wr("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||sl(t,o.key)):Zr()}}function ul(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Wr("SyncEngine","New document in limbo: "+n),t.So.add(r),cl(t))}function cl(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Ai(fi.fromString(e)),r=t.ko.next();t.Co.set(r,new zh(n)),t.Do=t.Do.insert(n,r),rh(t.remoteStore,new $a(To(po(n.path)),r,2,Kr.o))}}function hl(t,e,n){return Object(Br.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Br.d)(this,function(a){switch(a.label){case 0:return r=ti(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.Oo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=ec.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return Object(Br.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(Br.d)(this,function(h){switch(h.label){case 0:n=ti(t),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Ua.forEach(e,function(e){return Ua.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return Ua.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return h.sent(),[3,4];case 3:if(!Ga(r=h.sent()))throw r;return Wr("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function ll(t,e){return Object(Br.b)(this,void 0,void 0,function(){var n,r;return Object(Br.d)(this,function(i){switch(i.label){case 0:return(n=ti(t)).currentUser.isEqual(e)?[3,3]:(Wr("SyncEngine","User change. New user:",e.toKey()),[4,oc(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new zr(Gr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,hl(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function fl(t,e){var n=ti(t),r=n.Co.get(e);if(r&&r.bo)return Os().add(r.key);var i=Os(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function dl(t,e){return Object(Br.b)(this,void 0,void 0,function(){var n,r,i;return Object(Br.d)(this,function(o){switch(o.label){case 0:return[4,dc((n=ti(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&al(n,e.targetId,i.To),i)]}})})}function pl(t){return Object(Br.b)(this,void 0,void 0,function(){var e;return Object(Br.d)(this,function(n){return[2,yc((e=ti(t)).localStore).then(function(t){return hl(e,t)})]})})}function yl(t,e,n,r){return Object(Br.b)(this,void 0,void 0,function(){var i,o;return Object(Br.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=ti(t),r=ti(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):Ua.resolve(null)})})}((i=ti(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,gh(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(il(i,e,r||null),rl(i,e),function(t,e){ti(ti(t)._n).Gt(e)}(i.localStore,e)):Zr(),s.label=4;case 4:return[4,hl(i,o)];case 5:return s.sent(),[3,7];case 6:Wr("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function gl(t,e){return Object(Br.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Br.d)(this,function(c){switch(c.label){case 0:return Il(n=ti(t)),El(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,vl(n,r.toArray())]);case 1:return i=c.sent(),n.$o=!0,[4,Eh(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)rh(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return ol(n,e),fc(n.localStore,e,!0)}),ih(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,vl(n,a)];case 5:return c.sent(),function(t){var e=ti(t);e.Co.forEach(function(t,n){ih(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new fs(Ai.comparator)}(n),n.$o=!1,[4,Eh(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function vl(t,e,n){return Object(Br.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,h,l,f,d,p;return Object(Br.d)(this,function(y){switch(y.label){case 0:n=ti(t),r=[],i=[],o=0,s=e,y.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,lc(n.localStore,To(c[0]))]:[3,7]):[3,13];case 2:u=y.sent(),h=0,l=c,y.label=3;case 3:return h<l.length?(f=n.Po.get(l[h]),[4,dl(n,f)]):[3,6];case 4:(d=y.sent()).snapshot&&i.push(d.snapshot),y.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,pc(n.localStore,a)];case 8:return p=y.sent(),[4,lc(n.localStore,p)];case 9:return u=y.sent(),[4,Wh(n,ml(p),a,!1)];case 10:y.sent(),y.label=11;case 11:r.push(u),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function ml(t){return fo(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function bl(t){var e=ti(t);return ti(ti(e.localStore).persistence).fn()}function wl(t,e,n,r){return Object(Br.b)(this,void 0,void 0,function(){var i,o,s;return Object(Br.d)(this,function(a){switch(a.label){case 0:return(i=ti(t)).$o?(Wr("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,yc(i.localStore)];case 3:return o=a.sent(),s=As.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,hl(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,fc(i.localStore,e,!0)];case 6:return a.sent(),ol(i,e,r),[3,8];case 7:Zr(),a.label=8;case 8:return[2]}})})}function Tl(t,e,n){return Object(Br.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,h,l;return Object(Br.d)(this,function(f){switch(f.label){case 0:if(!(r=Il(t)).$o)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(Wr("SyncEngine","Adding an already active target "+s),[3,5]):[4,pc(r.localStore,s)]:[3,6];case 2:return a=f.sent(),[4,lc(r.localStore,a)];case 3:return u=f.sent(),[4,Wh(r,ml(a),u.targetId,!1)];case 4:f.sent(),rh(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(Br.d)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,fc(r.localStore,t,!1).then(function(){ih(r.remoteStore,t),ol(r,t)}).catch(ju)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},h=0,l=n,f.label=7;case 7:return h<l.length?[5,c(l[h])]:[3,10];case 8:f.sent(),f.label=9;case 9:return h++,[3,7];case 10:return[2]}})})}function Il(t){var e=ti(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Jh.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fl.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$h.bind(null,e),e.vo._r=Ph.bind(null,e.eventManager),e.vo.Mo=Lh.bind(null,e.eventManager),e}function El(t){var e=ti(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tl.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=el.bind(null,e),e}var Ol=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(Br.b)(this,void 0,void 0,function(){return Object(Br.d)(this,function(e){switch(e.label){case 0:return this.R=Qc(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return ic(this.persistence,new nc,t.initialUser,this.R)},t.prototype.qo=function(t){return new Dc(kc.bs,this.R)},t.prototype.Bo=function(t){return new Uc},t.prototype.terminate=function(){return Object(Br.b)(this,void 0,void 0,function(){return Object(Br.d)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),Sl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(Br.c)(e,t),e.prototype.initialize=function(e){return Object(Br.b)(this,void 0,void 0,function(){return Object(Br.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,gc(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,El(this.Ko.syncEngine)];case 4:return n.sent(),[4,gh(this.Ko.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Qo=function(t){return ic(this.persistence,new nc,t.initialUser,this.R)},e.prototype.Uo=function(t){return new Pu(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=Zu(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?bu.withCacheSize(this.cacheSizeBytes):bu.DEFAULT;return new Yu(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,zc(),Hc(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Uc},e}(Ol),Dl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(Br.c)(e,t),e.prototype.initialize=function(e){return Object(Br.b)(this,void 0,void 0,function(){var n,r=this;return Object(Br.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof Fc?(this.sharedClientState.syncEngine={ui:yl.bind(null,n),ai:wl.bind(null,n),hi:Tl.bind(null,n),fn:bl.bind(null,n),ci:pl.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return Object(Br.b)(r,void 0,void 0,function(){return Object(Br.d)(this,function(e){switch(e.label){case 0:return[4,gl(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=zc();if(!Fc.yt(e))throw new zr(Gr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Zu(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Fc(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Sl),Al=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(Br.b)(this,void 0,void 0,function(){var n=this;return Object(Br.d)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Zh(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=ll.bind(null,this.syncEngine),[4,Eh(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new jh},t.prototype.createDatastore=function(t){var e=Qc(t.databaseInfo.databaseId),n=new Gc(t.databaseInfo);return function(t,e,n){return new Zc(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Zh(s.syncEngine,t,0)},o=qc.yt()?new qc:new Vc,new th(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new Hh(t,e,n,r,i,o);return s&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(Br.b)(this,void 0,void 0,function(){var e;return Object(Br.d)(this,function(n){switch(n.label){case 0:return e=ti(t),Wr("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,nh(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),kl=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Nl=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new Fa,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(Br.b)(this,void 0,void 0,function(){return Object(Br.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return Object(Br.b)(this,void 0,void 0,function(){return Object(Br.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return Object(Br.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(Br.d)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new Uh(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return Object(Br.b)(this,void 0,void 0,function(){var t,e;return Object(Br.d)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return Object(Br.b)(this,void 0,void 0,function(){var e;return Object(Br.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(Br.b)(this,void 0,void 0,function(){var t,e;return Object(Br.d)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(Br.b)(this,void 0,void 0,function(){var e,n=this;return Object(Br.d)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new zr(Gr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(Br.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(Br.d)(this,function(u){switch(u.label){case 0:return n=ti(t),r=Ys(n.R)+"/documents",i={documents:e.map(function(t){return zs(n.R,t)})},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){$r(!!e.found);var n=Hs(t,e.found.name),r=Bs(e.found.updateTime),i=new Bi({mapValue:{fields:e.found.fields}});return Gi.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){$r(!!e.missing),$r(!!e.readTime);var n=Hs(t,e.missing),r=Bs(e.readTime);return Gi.newNoDocument(n,r)}(t,e):Zr()}(n.R,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());$r(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new as(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(Br.b)(this,void 0,void 0,function(){var t,e=this;return Object(Br.d)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=Ai.fromPath(n);e.mutations.push(new us(r,e.precondition(r)))}),[4,function(t,e){return Object(Br.b)(this,void 0,void 0,function(){var n,r,i;return Object(Br.d)(this,function(o){switch(o.label){case 0:return n=ti(t),r=Ys(n.R)+"/documents",i={writes:e.map(function(t){return $s(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Zr();e=ai.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new zr(Gr.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Ho.updateTime(e):Ho.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(ai.min()))throw new zr(Gr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ho.updateTime(e)}return Ho.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),_l=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Wc(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return Object(Br.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(Br.d)(this,function(r){return t=new Nl(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Oi(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!hs(e)}return!1},t}(),Cl=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Nc.UNAUTHENTICATED,this.clientId=ni.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,function(t){return Object(Br.b)(r,void 0,void 0,function(){return Object(Br.d)(this,function(e){switch(e.label){case 0:return Wr("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}})})})}return t.prototype.getConfiguration=function(){return Object(Br.b)(this,void 0,void 0,function(){return Object(Br.d)(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new zr(Gr.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Fa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Br.b)(t,void 0,void 0,function(){var t,n;return Object(Br.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Ah(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function jl(t,e){return Object(Br.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(Br.d)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Wr("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(t){return Object(Br.b)(i,void 0,void 0,function(){return Object(Br.d)(this,function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,oc(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function xl(t,e){return Object(Br.b)(this,void 0,void 0,function(){var n,r;return Object(Br.d)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Rl(t)];case 1:return n=i.sent(),Wr("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(t){return function(t,e){return Object(Br.b)(this,void 0,void 0,function(){var n,r;return Object(Br.d)(this,function(i){switch(i.label){case 0:return(n=ti(t)).asyncQueue.verifyOperationInProgress(),Wr("RemoteStore","RemoteStore received new credentials"),r=ch(n),n.Or.add(3),[4,nh(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,eh(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,t)}),t.onlineComponents=e,[2]}})})}function Rl(t){return Object(Br.b)(this,void 0,void 0,function(){return Object(Br.d)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Wr("FirestoreClient","Using default OfflineComponentProvider"),[4,jl(t,new Ol)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function Pl(t){return Object(Br.b)(this,void 0,void 0,function(){return Object(Br.d)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Wr("FirestoreClient","Using default OnlineComponentProvider"),[4,xl(t,new Al)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function Ll(t){return Rl(t).then(function(t){return t.persistence})}function Ml(t){return Rl(t).then(function(t){return t.localStore})}function Fl(t){return Pl(t).then(function(t){return t.remoteStore})}function Ul(t){return Pl(t).then(function(t){return t.syncEngine})}function Vl(t){return Object(Br.b)(this,void 0,void 0,function(){var e,n;return Object(Br.d)(this,function(r){switch(r.label){case 0:return[4,Pl(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Qh.bind(null,e.syncEngine),n.onUnlisten=Yh.bind(null,e.syncEngine),n)]}})})}function ql(t,e,n){var r=this;void 0===n&&(n={});var i=new Fa;return t.asyncQueue.enqueueAndForget(function(){return Object(Br.b)(r,void 0,void 0,function(){var r;return Object(Br.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new kl({next:function(o){e.enqueueAndForget(function(){return Rh(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new zr(Gr.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new zr(Gr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Fh(po(n.path),o,{includeMetadataChanges:!0,so:!0});return xh(t,s)},[4,Vl(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function Bl(t,e,n){var r=this;void 0===n&&(n={});var i=new Fa;return t.asyncQueue.enqueueAndForget(function(){return Object(Br.b)(r,void 0,void 0,function(){var r;return Object(Br.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new kl({next:function(n){e.enqueueAndForget(function(){return Rh(t,s)}),n.fromCache&&"server"===r.source?i.reject(new zr(Gr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Fh(n,o,{includeMetadataChanges:!0,so:!0});return xh(t,s)},[4,Vl(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Kl=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},Gl=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),zl=new Map,Hl=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Ql=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable(function(){return e(Nc.UNAUTHENTICATED)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Wl=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable(function(){return e(n.token.user)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Yl=function(){function t(t){var e=this;this.currentUser=Nc.UNAUTHENTICATED,this.oc=new Fa,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable(function(){return e.changeListener(e.currentUser)})};var n=function(t){Wr("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit(function(t){return n(t)}),setTimeout(function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(Wr("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}},0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(Wr("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?($r("string"==typeof n.accessToken),new Hl(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return Object(Br.b)(n,void 0,void 0,function(){return Object(Br.d)(this,function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}})})})},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return $r(null===t||"string"==typeof t),new Nc(t)},t}(),Xl=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=Nc.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),Jl=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new Xl(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable(function(){return e(Nc.FIRST_PARTY)})},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Zl(t,e,n){if(!n)throw new zr(Gr.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function $l(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new zr(Gr.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function tf(t,e,n,r){if(!0===e&&!0===r)throw new zr(Gr.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function ef(t){if(!Ai.isDocumentKey(t))throw new zr(Gr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function nf(t){if(Ai.isDocumentKey(t))throw new zr(Gr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function rf(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Zr()}function of(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new zr(Gr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=rf(t);throw new zr(Gr.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function sf(t,e){if(e<=0)throw new zr(Gr.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var af=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new zr(Gr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new zr(Gr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,tf("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),uf=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new af({}),this._settingsFrozen=!1,t instanceof Gl?(this._databaseId=t,this._credentials=new Ql):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new zr(Gr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gl(t.options.projectId)}(t),this._credentials=new Yl(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new zr(Gr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new zr(Gr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new af(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Ql;switch(t.type){case"gapi":var e=t.client;return $r(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Jl(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new zr(Gr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=zl.get(this))&&(Wr("ComponentProvider","Removing Datastore"),zl.delete(this),t.terminate()),Promise.resolve();var t},t}(),cf=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new lf(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),hf=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),lf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,po(r))||this)._path=r,i.type="collection",i}return Object(Br.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new cf(this.firestore,null,new Ai(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(hf);function ff(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(C.h)(t),Zl("collection","path",e),t instanceof uf)return nf(n=fi.fromString.apply(fi,Object(Br.f)([e],r))),new lf(t,null,n);if(!(t instanceof cf||t instanceof lf))throw new zr(Gr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return nf(n=fi.fromString.apply(fi,Object(Br.f)([t.path],r)).child(fi.fromString(e))),new lf(t.firestore,null,n)}function df(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(C.h)(t),1===arguments.length&&(e=ni.u()),Zl("doc","path",e),t instanceof uf)return ef(n=fi.fromString.apply(fi,Object(Br.f)([e],r))),new cf(t,null,new Ai(n));if(!(t instanceof cf||t instanceof lf))throw new zr(Gr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return ef(n=t._path.child(fi.fromString.apply(fi,Object(Br.f)([e],r)))),new cf(t.firestore,t instanceof lf?t.converter:null,new Ai(n))}function pf(t,e){return t=Object(C.h)(t),e=Object(C.h)(e),(t instanceof cf||t instanceof lf)&&(e instanceof cf||e instanceof lf)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function yf(t,e){return t=Object(C.h)(t),e=Object(C.h)(e),t instanceof hf&&e instanceof hf&&t.firestore===e.firestore&&Eo(t._query,e._query)&&t.converter===e.converter}var gf=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=[],this.Zi=new Wc(this,"async_queue_retry"),this.Tc=function(){var e=Hc();e&&Wr("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Hc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Tc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ic(),this.Ac(t)},t.prototype.enterRestrictedMode=function(){if(!this._c){this._c=!0;var t=Hc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Tc)}},t.prototype.enqueue=function(t){return this.Ic(),this._c?new Promise(function(t){}):this.Ac(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.wc.push(t),e.Rc()})},t.prototype.Rc=function(){return Object(Br.b)(this,void 0,void 0,function(){var t,e=this;return Object(Br.d)(this,function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Ga(t=n.sent()))throw t;return Wr("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return e.Rc()}),n.label=5;case 5:return[2]}})})},t.prototype.Ac=function(t){var e=this,n=this.dc.then(function(){return e.gc=!0,t().catch(function(t){throw e.yc=t,e.gc=!1,Yr("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.gc=!1,t})});return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ic(),this.Ec.indexOf(t)>-1&&(e=0);var i=Dh.createAndSchedule(this,t,e,n,function(t){return r.bc(t)});return this.mc.push(i),i},t.prototype.Ic=function(){this.yc&&Zr()},t.prototype.verifyOperationInProgress=function(){},t.prototype.vc=function(){return Object(Br.b)(this,void 0,void 0,function(){var t;return Object(Br.d)(this,function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Pc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Vc=function(t){var e=this;return this.vc().then(function(){e.mc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.vc()})},t.prototype.Sc=function(t){this.Ec.push(t)},t.prototype.bc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function vf(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Fa,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var mf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new gf,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(Br.c)(e,t),e.prototype._terminate=function(){return this._firestoreClient||wf(this),this._firestoreClient.terminate()},e}(uf);function bf(t){return t._firestoreClient||wf(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function wf(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Kl(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Cl(t._credentials,t._queue,r)}function Tf(t,e,n){var r=this,i=new Fa;return t.asyncQueue.enqueue(function(){return Object(Br.b)(r,void 0,void 0,function(){var r;return Object(Br.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,jl(t,n)];case 1:return o.sent(),[4,xl(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Gr.FAILED_PRECONDITION||t.code===Gr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function If(t){if(t._initialized||t._terminated)throw new zr(Gr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Ef=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new zr(Gr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pi(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Of=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(gi.fromBase64String(e))}catch(e){throw new zr(Gr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(gi.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Sf=function(t){this._methodName=t},Df=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new zr(Gr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new zr(Gr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return ri(this._lat,t._lat)||ri(this._long,t._long)},t}(),Af=/^__.*__$/,kf=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new es(t,this.data,this.fieldMask,e,this.fieldTransforms):new ts(t,this.data,e,this.fieldTransforms)},t}(),Nf=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new es(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function _f(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Zr()}}var Cf=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Dc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Cc",{get:function(){return this.settings.Cc},enumerable:!1,configurable:!0}),t.prototype.Nc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.xc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.kc(t),r},t.prototype.$c=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.Dc(),r},t.prototype.Oc=function(t){return this.Nc({path:void 0,Fc:!0})},t.prototype.Mc=function(t){return Jf(t,this.settings.methodName,this.settings.Lc||!1,this.path,this.settings.Bc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Dc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.kc(this.path.get(t))},t.prototype.kc=function(t){if(0===t.length)throw this.Mc("Document fields must not be empty");if(_f(this.Cc)&&Af.test(t))throw this.Mc('Document fields cannot begin and end with "__"')},t}(),jf=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Qc(t)}return t.prototype.qc=function(t,e,n,r){return void 0===r&&(r=!1),new Cf({Cc:t,methodName:e,Bc:n,path:pi.emptyPath(),Fc:!1,Lc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function xf(t){var e=t._freezeSettings(),n=Qc(t._databaseId);return new jf(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Rf(t,e,n,r,i,o){void 0===o&&(o={});var s=t.qc(o.merge||o.mergeFields?2:0,e,n,i);Qf("Data must be an object, but it was:",s,r);var a,u,c=zf(r,s);if(o.merge)a=new yi(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var h=[],l=0,f=o.mergeFields;l<f.length;l++){var d=Wf(e,f[l],n);if(!s.contains(d))throw new zr(Gr.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Zf(h,d)||h.push(d)}a=new yi(h),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new kf(new Bi(c),a,u)}var Pf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Br.c)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Cc)throw t.Mc(1===t.Cc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Sf);function Lf(t,e,n){return new Cf({Cc:3,Bc:e.settings.Bc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Mf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Br.c)(e,t),e.prototype._toFieldTransform=function(t){return new Go(t.path,new Lo)},e.prototype.isEqual=function(t){return t instanceof e},e}(Sf),Ff=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return Object(Br.c)(e,t),e.prototype._toFieldTransform=function(t){var e=Lf(this,t,!0),n=this.Uc.map(function(t){return Gf(t,e)}),r=new Mo(n);return new Go(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Sf),Uf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return Object(Br.c)(e,t),e.prototype._toFieldTransform=function(t){var e=Lf(this,t,!0),n=this.Uc.map(function(t){return Gf(t,e)}),r=new Uo(n);return new Go(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Sf),Vf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return Object(Br.c)(e,t),e.prototype._toFieldTransform=function(t){var e=new qo(t.R,Co(t.R,this.Qc));return new Go(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Sf);function qf(t,e,n,r){var i=t.qc(1,e,n);Qf("Data must be an object, but it was:",i,r);var o=[],s=Bi.empty();ci(r,function(t,r){var a=Xf(e,t,n);r=Object(C.h)(r);var u=i.$c(a);if(r instanceof Pf)o.push(a);else{var c=Gf(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new yi(o);return new Nf(s,a,i.fieldTransforms)}function Bf(t,e,n,r,i,o){var s=t.qc(1,e,n),a=[Wf(e,r,n)],u=[i];if(o.length%2!=0)throw new zr(Gr.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Wf(e,o[c])),u.push(o[c+1]);for(var h=[],l=Bi.empty(),f=a.length-1;f>=0;--f)if(!Zf(h,a[f])){var d=a[f],p=u[f];p=Object(C.h)(p);var y=s.$c(d);if(p instanceof Pf)h.push(d);else{var g=Gf(p,y);null!=g&&(h.push(d),l.set(d,g))}}var v=new yi(h);return new Nf(l,v,s.fieldTransforms)}function Kf(t,e,n,r){return void 0===r&&(r=!1),Gf(n,t.qc(r?4:3,e))}function Gf(t,e){if(Hf(t=Object(C.h)(t)))return Qf("Unsupported field value:",e,t),zf(t,e);if(t instanceof Sf)return function(t,e){if(!_f(e.Cc))throw e.Mc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Mc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Cc)throw e.Mc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Gf(o[i],e.Oc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(C.h)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Co(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=si.fromDate(t);return{timestampValue:Us(e.R,n)}}if(t instanceof si)return n=new si(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Us(e.R,n)};if(t instanceof Df)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Of)return{bytesValue:Vs(e.R,t._byteString)};if(t instanceof cf){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Mc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Ks(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Mc("Unsupported field value: "+rf(t))}(t,e)}function zf(t,e){var n={};return hi(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ci(t,function(t,r){var i=Gf(r,e.xc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Hf(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof si||t instanceof Df||t instanceof Of||t instanceof cf||t instanceof Sf)}function Qf(t,e,n){if(!Hf(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=rf(n);throw e.Mc("an object"===r?t+" a custom object":t+" "+r)}}function Wf(t,e,n){if((e=Object(C.h)(e))instanceof Ef)return e._internalPath;if("string"==typeof e)return Xf(t,e);throw Jf("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Yf=new RegExp("[~\\*/\\[\\]]");function Xf(t,e,n){if(e.search(Yf)>=0)throw Jf("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Ef.bind.apply(Ef,Object(Br.f)([void 0],e.split(".")))))._internalPath}catch(r){throw Jf("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Jf(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new zr(Gr.INVALID_ARGUMENT,(a+=". ")+t+u)}function Zf(t,e){return t.some(function(t){return t.isEqual(e)})}var $f=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new cf(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new td(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(ed("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),td=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Br.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}($f);function ed(t,e){return"string"==typeof e?Xf(t,e):e instanceof Ef?e._internalPath:e._delegate._internalPath}var nd=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),rd=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(Br.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new id(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(ed("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}($f),id=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Br.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(rd),od=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new nd(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new id(n._firestore,n._userDataWriter,r.key,r,new nd(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new zr(Gr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new id(t._firestore,t._userDataWriter,e.doc.key,e.doc,new nd(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new id(t._firestore,t._userDataWriter,e.doc.key,e.doc,new nd(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:sd(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function sd(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Zr()}}function ad(t,e){return t instanceof rd&&e instanceof rd?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof od&&e instanceof od&&t._firestore===e._firestore&&yf(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function ud(t){if(go(t)&&0===t.explicitOrderBy.length)throw new zr(Gr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var cd=function(){};function hd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var ld=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Kc=e,i.jc=n,i.Wc=r,i.type="where",i}return Object(Br.c)(e,t),e.prototype._apply=function(t){var e=xf(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new zr(Gr.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){md(s,o);for(var u=[],c=0,h=s;c<h.length;c++)u.push(vd(r,t,h[c]));a={arrayValue:{values:u}}}else a=vd(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||md(s,o),a=Kf(n,"where",s,"in"===o||"not-in"===o);var l=Xi.create(i,o,a);return function(t,e){if(e.g()){var n=mo(t);if(null!==n&&!n.isEqual(e.field))throw new zr(Gr.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=vo(t);null!==r&&bd(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new zr(Gr.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,l),l}(t._query,0,e,t.firestore._databaseId,this.Kc,this.jc,this.Wc);return new hf(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new lo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(cd),fd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Kc=e,r.Gc=n,r.type="orderBy",r}return Object(Br.c)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new zr(Gr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new zr(Gr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new ao(e,n);return function(t,e){if(null===vo(t)){var n=mo(t);null!==n&&bd(0,n,e.field)}}(t,r),r}(t._query,this.Kc,this.Gc);return new hf(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new lo(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(cd),dd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.zc=n,i.Hc=r,i}return Object(Br.c)(e,t),e.prototype._apply=function(t){return new hf(t.firestore,t.converter,Io(t._query,this.zc,this.Hc))},e}(cd),pd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return Object(Br.c)(e,t),e.prototype._apply=function(t){var e=gd(t,this.type,this.Jc,this.Yc);return new hf(t.firestore,t.converter,function(t,e){return new lo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(cd),yd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return Object(Br.c)(e,t),e.prototype._apply=function(t){var e=gd(t,this.type,this.Jc,this.Yc);return new hf(t.firestore,t.converter,function(t,e){return new lo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(cd);function gd(t,e,n,r){if(n[0]=Object(C.h)(n[0]),n[0]instanceof $f)return function(t,e,n,r,i){if(!r)throw new zr(Gr.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=wo(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(Pi(e,r.key));else{var c=r.data.field(u.field);if(Ti(c))throw new zr(Gr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.canonicalString();throw new zr(Gr.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new oo(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=xf(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new zr(Gr.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new zr(Gr.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!bo(t)&&-1!==c.indexOf("/"))throw new zr(Gr.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(fi.fromString(c));if(!Ai.isDocumentKey(h))throw new zr(Gr.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var l=new Ai(h);a.push(Pi(e,l))}else{var f=Kf(n,r,c);a.push(f)}}return new oo(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function vd(t,e,n){if("string"==typeof(n=Object(C.h)(n))){if(""===n)throw new zr(Gr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!bo(e)&&-1!==n.indexOf("/"))throw new zr(Gr.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(fi.fromString(n));if(!Ai.isDocumentKey(r))throw new zr(Gr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Pi(t,new Ai(r))}if(n instanceof cf)return Pi(t,n._key);throw new zr(Gr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+rf(n)+".")}function md(t,e){if(!Array.isArray(t)||0===t.length)throw new zr(Gr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new zr(Gr.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function bd(t,e,n){if(!n.isEqual(e))throw new zr(Gr.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var wd=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),ki(t)){case 0:return null;case 1:return t.booleanValue;case 2:return bi(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(wi(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Zr()}},t.prototype.convertObject=function(t,e){var n=this,r={};return ci(t.fields,function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new Df(bi(t.latitude),bi(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Ii(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Ei(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=mi(t);return new si(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=fi.fromString(t);$r(pa(n));var r=new Gl(n.get(1),n.get(3)),i=new Ai(n.popFirst(5));return r.isEqual(e)||Yr("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function Td(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Id=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Br.c)(e,t),e.prototype.convertBytes=function(t){return new Of(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new cf(this.firestore,null,e)},e}(wd),Ed=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=xf(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Od(t,this._firestore),i=Td(r.converter,e,n),o=Rf(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Ho.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=Od(t,this._firestore);return o="string"==typeof(e=Object(C.h)(e))||e instanceof Ef?Bf(this._dataReader,"WriteBatch.update",s._key,e,n,r):qf(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Ho.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Od(t,this._firestore);return this._mutations=this._mutations.concat(new as(e._key,Ho.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new zr(Gr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Od(t,e){if((t=Object(C.h)(t)).firestore!==e)throw new zr(Gr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Sd=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Br.c)(e,t),e.prototype.convertBytes=function(t){return new Of(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new cf(this.firestore,null,e)},e}(wd);function Dd(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=of(t,cf);var o=of(t.firestore,mf),s=xf(o);return kd(o,[("string"==typeof(e=Object(C.h)(e))||e instanceof Ef?Bf(s,"updateDoc",t._key,e,n,r):qf(s,"updateDoc",t._key,e)).toMutation(t._key,Ho.exists(!0))])}function Ad(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Object(C.h)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||vf(i[a])||(s=i[a],a++);var u,c,h,l={includeMetadataChanges:s.includeMetadataChanges};if(vf(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof cf)c=of(t.firestore,mf),h=po(t._key.path),u={next:function(e){i[a]&&i[a](Nd(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=of(t,hf);c=of(d.firestore,mf),h=d._query;var p=new Sd(c);u={next:function(t){i[a]&&i[a](new od(c,p,d,t))},error:i[a+1],complete:i[a+2]},ud(t._query)}return function(t,e,n,r){var i=this,o=new kl(r),s=new Fh(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return Object(Br.b)(i,void 0,void 0,function(){var e;return Object(Br.d)(this,function(n){switch(n.label){case 0:return e=xh,[4,Vl(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(Br.b)(i,void 0,void 0,function(){var e;return Object(Br.d)(this,function(n){switch(n.label){case 0:return e=Rh,[4,Vl(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(bf(c),h,l,u)}function kd(t,e){return function(t,e){var n=this,r=new Fa;return t.asyncQueue.enqueueAndForget(function(){return Object(Br.b)(n,void 0,void 0,function(){var n;return Object(Br.d)(this,function(i){switch(i.label){case 0:return n=Xh,[4,Ul(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(bf(t),e)}function Nd(t,e,n){var r=n.docs.get(e._key),i=new Sd(t);return new rd(t,i,e._key,r,new nd(n.hasPendingWrites,n.fromCache),e.converter)}var _d=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(Br.c)(e,t),e.prototype.get=function(e){var n=this,r=Od(e,this._firestore),i=new Sd(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new rd(n._firestore,i,r._key,t._document,new nd(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=xf(t)}return t.prototype.get=function(t){var e=this,n=Od(t,this._firestore),r=new Id(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return Zr();var i=t[0];if(i.isFoundDocument())return new $f(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new $f(e._firestore,r,n._key,null,n.converter);throw Zr()})},t.prototype.set=function(t,e,n){var r=Od(t,this._firestore),i=Td(r.converter,e,n),o=Rf(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Od(t,this._firestore);return o="string"==typeof(e=Object(C.h)(e))||e instanceof Ef?Bf(this._dataReader,"Transaction.update",s._key,e,n,r):qf(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=Od(t,this._firestore);return this._transaction.delete(e._key),this},t}());function Cd(){if("undefined"==typeof Uint8Array)throw new zr(Gr.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function jd(){if("undefined"==typeof atob)throw new zr(Gr.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var xd=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return jd(),new t(Of.fromBase64String(e))},t.fromUint8Array=function(e){return Cd(),new t(Of.fromUint8Array(e))},t.prototype.toBase64=function(){return jd(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return Cd(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),Rd=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){If(t=of(t,mf));var n=bf(t),r=t._freezeSettings(),i=new Al;return Tf(n,i,new Sl(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){If(t=of(t,mf));var e=bf(t),n=t._freezeSettings(),r=new Al;return Tf(e,r,new Dl(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new zr(Gr.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Fa;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Br.b)(e,void 0,void 0,function(){var e;return Object(Br.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(Br.b)(this,void 0,void 0,function(){return Object(Br.d)(this,function(e){switch(e.label){case 0:return qa.yt()?[4,qa.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(Zu(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),Pd=function(){function t(t,e,n){var r=this;this._delegate=e,this.Xc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Gl||(this.Zc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||Xr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=of(t,uf))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&Xr("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=Object(C.d)(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new zr(Gr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new Wl(new Hl(o,new Nc(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Br.b)(e,void 0,void 0,function(){var e,n;return Object(Br.d)(this,function(r){switch(r.label){case 0:return[4,Ll(t)];case 1:return e=r.sent(),[4,Fl(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=ti(t);return e.Or.delete(0),eh(e)}(n))]}})})})}(bf(of(this._delegate,mf)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Br.b)(e,void 0,void 0,function(){var e,n;return Object(Br.d)(this,function(r){switch(r.label){case 0:return[4,Ll(t)];case 1:return e=r.sent(),[4,Fl(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(Br.b)(this,void 0,void 0,function(){var e;return Object(Br.d)(this,function(n){switch(n.label){case 0:return(e=ti(t)).Or.add(0),[4,nh(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(bf(of(this._delegate,mf)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&tf("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Xc.enableMultiTabIndexedDbPersistence(this):this.Xc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Xc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Zc&&(this.Zc._removeServiceInstance("firestore"),this.Zc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Fa;return t.asyncQueue.enqueueAndForget(function(){return Object(Br.b)(e,void 0,void 0,function(){var e;return Object(Br.d)(this,function(r){switch(r.label){case 0:return e=nl,[4,Ul(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(bf(of(this._delegate,mf)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new kl(e);return t.asyncQueue.enqueueAndForget(function(){return Object(Br.b)(n,void 0,void 0,function(){var e;return Object(Br.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){ti(t).Gr.add(e),e.next()},[4,Vl(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(Br.b)(n,void 0,void 0,function(){var e;return Object(Br.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){ti(t).Gr.delete(e)},[4,Vl(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(bf(t=of(t,mf)),vf(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Zc)throw new zr(Gr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Zc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Yd(this,ff(this._delegate,t))}catch(t){throw qd(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Vd(this,df(this._delegate,t))}catch(t){throw qd(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Hd(this,function(t,e){if(t=of(t,uf),Zl("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new zr(Gr.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new hf(t,null,function(t){return new lo(fi.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw qd(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Fa;return t.asyncQueue.enqueueAndForget(function(){return Object(Br.b)(n,void 0,void 0,function(){var n;return Object(Br.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return Pl(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new _l(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(bf(t),function(n){return e(new _d(t,n))})}(this._delegate,function(n){return t(new Md(e,n))})},t.prototype.batch=function(){var t=this;return bf(this._delegate),new Fd(new Ed(this._delegate,function(e){return kd(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new zr(Gr.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new zr(Gr.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Ld=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Br.c)(e,t),e.prototype.convertBytes=function(t){return new xd(new Of(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Vd.tu(e,this.firestore,null)},e}(wd),Md=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Ld(t)}return t.prototype.get=function(t){var e=this,n=Xd(t);return this._delegate.get(n).then(function(t){return new Gd(e._firestore,new rd(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=Xd(t);return n?($l("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Xd(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Br.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Xd(t);return this._delegate.delete(e),this},t}(),Fd=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Xd(t);return n?($l("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Xd(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Br.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Xd(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),Ud=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new id(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new zd(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.eu=function(e,n){var r=t.nu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Ld(e),n),i.set(n,o)),o},t}();Ud.nu=new WeakMap;var Vd=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Ld(t)}return t.su=function(e,n,r){if(e.length%2!=0)throw new zr(Gr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new cf(n._delegate,r,new Ai(e)))},t.tu=function(e,n,r){return new t(n,new cf(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Yd(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Yd(this.firestore,ff(this._delegate,t))}catch(t){throw qd(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(C.h)(t))instanceof cf&&pf(this._delegate,t)},t.prototype.set=function(t,e){e=$l("DocumentReference.set",e);try{return function(t,e,n){t=of(t,cf);var r=of(t.firestore,mf),i=Td(t.converter,e,n);return kd(r,[Rf(xf(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Ho.none())])}(this._delegate,t,e)}catch(t){throw qd(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Dd(this._delegate,t):Dd.apply(void 0,Object(Br.f)([this._delegate,t,e],n))}catch(t){throw qd(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return kd(of((t=this._delegate).firestore,mf),[new as(t._key,Ho.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Bd(e),i=Kd(e,function(e){return new Gd(t.firestore,new rd(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return Ad(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=of(t,cf);var e=of(t.firestore,mf),n=bf(e),r=new Sd(e);return function(t,e){var n=this,r=new Fa;return t.asyncQueue.enqueueAndForget(function(){return Object(Br.b)(n,void 0,void 0,function(){var n;return Object(Br.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Br.b)(this,void 0,void 0,function(){var r,i;return Object(Br.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=ti(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new zr(Gr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Ah(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,Ml(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new rd(e,r,t._key,n,new nd(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=of(t,cf);var e=of(t.firestore,mf);return ql(bf(e),t._key,{source:"server"}).then(function(n){return Nd(e,t,n)})}(this._delegate):function(t){t=of(t,cf);var e=of(t.firestore,mf);return ql(bf(e),t._key).then(function(n){return Nd(e,t,n)})}(this._delegate)).then(function(t){return new Gd(e.firestore,new rd(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Ud.eu(this.firestore,e):null))},t}();function qd(t,e,n){return t.message=t.message.replace(e,n),t}function Bd(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!vf(r))return r}return{}}function Kd(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=vf(t[0])?t[0]:vf(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Gd=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Vd(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return ad(this._delegate,t._delegate)},t}(),zd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Br.c)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Gd),Hd=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Ld(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,hd(this._delegate,function(t,e,n){var r=e,i=ed("where",t);return new ld(i,r,n)}(e,n,r)))}catch(e){throw qd(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,hd(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=ed("orderBy",t);return new fd(r,n)}(e,n)))}catch(e){throw qd(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,hd(this._delegate,function(t){return sf("limit",t),new dd("limit",t,"F")}(e)))}catch(e){throw qd(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,hd(this._delegate,function(t){return sf("limitToLast",t),new dd("limitToLast",t,"L")}(e)))}catch(e){throw qd(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,hd(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new pd("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw qd(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,hd(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new pd("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw qd(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,hd(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new yd("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw qd(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,hd(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new yd("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw qd(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return yf(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=of(t,hf);var e=of(t.firestore,mf),n=bf(e),r=new Sd(e);return function(t,e){var n=this,r=new Fa;return t.asyncQueue.enqueueAndForget(function(){return Object(Br.b)(n,void 0,void 0,function(){var n;return Object(Br.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Br.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(Br.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,dc(t,e,!0)];case 1:return a=u.sent(),r=new Kh(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=Ah(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,Ml(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new od(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=of(t,hf);var e=of(t.firestore,mf),n=bf(e),r=new Sd(e);return Bl(n,t._query,{source:"server"}).then(function(n){return new od(e,r,t,n)})}(this._delegate):function(t){t=of(t,hf);var e=of(t.firestore,mf),n=bf(e),r=new Sd(e);return ud(t._query),Bl(n,t._query).then(function(n){return new od(e,r,t,n)})}(this._delegate)).then(function(t){return new Wd(e.firestore,new od(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Bd(e),i=Kd(e,function(e){return new Wd(t.firestore,new od(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return Ad(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Ud.eu(this.firestore,e):null))},t}(),Qd=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new zd(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),Wd=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Hd(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new zd(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new Qd(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new zd(n._firestore,r))})},t.prototype.isEqual=function(t){return ad(this._delegate,t._delegate)},t}(),Yd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(Br.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Vd(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Vd(this.firestore,void 0===t?df(this._delegate):df(this._delegate,t))}catch(t){throw qd(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=of(t.firestore,mf),r=df(t),i=Td(t.converter,e);return kd(n,[Rf(xf(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Ho.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new Vd(e.firestore,t)})},e.prototype.isEqual=function(t){return pf(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?Ud.eu(this.firestore,t):null))},e}(Hd);function Xd(t){return of(t,cf)}var Jd,Zd=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(Ef.bind.apply(Ef,Object(Br.f)([void 0],t)))}return t.documentId=function(){return new t(pi.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(C.h)(t))instanceof Ef&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),$d=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Mf("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Pf("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ff("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Uf("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Vf("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),tp=n("/6Yf"),ep={Firestore:Pd,GeoPoint:Df,Timestamp:si,Blob:xd,Transaction:Md,WriteBatch:Fd,DocumentReference:Vd,DocumentSnapshot:Gd,Query:Hd,QueryDocumentSnapshot:zd,QuerySnapshot:Wd,CollectionReference:Yd,FieldPath:Zd,FieldValue:$d,setLogLevel:function(t){Hr.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new tp.a("firestore",function(t){return function(t,e){return new Pd(t,new mf(t,e),new Rd)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},ep)))})(Jd=_.a),Jd.registerVersion("@firebase/firestore","2.3.7");var np=n("UbJi");function rp(t,e){return function(t,e=v.b){return new m.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function ip(t,e){return rp(t,e).pipe(Object(E.a)(t=>({payload:t,type:"query"})))}function op(t,e){return ip(t,e).pipe(Object(T.a)(void 0),Object(I.a)(),Object(E.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function sp(t,e,n){return op(t,n).pipe(Object(O.a)((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return ap(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return ap(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return ap(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),Object(S.a)(),Object(E.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function ap(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function up(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}class cp{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=op(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(E.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(Object(T.a)(void 0),Object(I.a)(),Object(D.a)(([t,e])=>e.length>0||!t),Object(E.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Object(O.a)((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=up(t);return sp(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return ip(this.query,this.afs.schedulers.outsideAngular).pipe(Object(E.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(b.a)(this.query.get(t)).pipe(Object(A.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new hp(this.ref.doc(t),this.afs)}}class hp{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=gp(n,e);return new cp(r,i,this.afs)}snapshotChanges(){return rp(this.ref,this.afs.schedulers.outsideAngular).pipe(Object(T.a)(void 0),Object(I.a)(),Object(E.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(E.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(b.a)(this.ref.get(t)).pipe(Object(A.b)(this.afs.schedulers.insideAngular))}}class lp{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?op(this.query,this.afs.schedulers.outsideAngular).pipe(Object(E.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Object(D.a)(t=>t.length>0),this.afs.keepUnstableUntilFirst):op(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Object(O.a)((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=up(t);return sp(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return ip(this.query,this.afs.schedulers.outsideAngular).pipe(Object(E.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(b.a)(this.query.get(t)).pipe(Object(A.b)(this.afs.schedulers.insideAngular))}}const fp=new i.s("angularfire2.enableFirestorePersistence"),dp=new i.s("angularfire2.firestore.persistenceSettings"),pp=new i.s("angularfire2.firestore.settings"),yp=new i.s("angularfire2.firestore.use-emulator");function gp(t,e=(t=>t)){return{query:e(t),ref:t}}let vp=(()=>{class t{constructor(t,e,n,i,o,s,a,u,c){this.schedulers=new k.d(s),this.keepUnstableUntilFirst=Object(k.h)(this.schedulers);const h=Object(k.g)(t,s,e);!N.a.auth&&c&&Object(k.j)();const l=u;[this.firestore,this.persistenceEnabled$]=Object(k.f)(`${h.name}.firestore`,"AngularFirestore",h,()=>{const t=s.runOutsideAngular(()=>h.firestore());if(i&&t.settings(i),l&&t.useEmulator(...l),n&&!Object(r.u)(o)){const e=()=>{try{return Object(b.a)(t.enablePersistence(a||void 0).then(()=>!0,()=>!1))}catch(Jd){return"undefined"!=typeof console&&console.warn(Jd),Object(w.a)(!1)}};return[t,s.runOutsideAngular(e)]}return[t,Object(w.a)(!1)]},[i,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=gp(n,e),o=this.schedulers.ngZone.run(()=>r);return new cp(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new lp(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new hp(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(k.c),i.Yb(k.b,8),i.Yb(fp,8),i.Yb(pp,8),i.Yb(i.D),i.Yb(i.B),i.Yb(dp,8),i.Yb(yp,8),i.Yb(np.b,8))},t.\u0275prov=i.Kb({factory:function(){return new t(i.Yb(k.c),i.Yb(k.b,8),i.Yb(fp,8),i.Yb(pp,8),i.Yb(i.D),i.Yb(i.B),i.Yb(dp,8),i.Yb(yp,8),i.Yb(np.b,8))},token:t,providedIn:"any"}),t})();var mp=n("kmnG"),bp=n("qFsG"),wp=n("3Pt+");let Tp=(()=>{class t{constructor(t,e,n,r){this.dialogRef=t,this.data=e,this.db=n,this.auth=r,this.userData={}}ngOnInit(){this.auth.user.subscribe(t=>{this.userData=t})}saveData(){if(this.loading=!0,null==this.data.id){let t=(new Date).getTime().toString();this.data.uid=this.userData.uid,this.db.collection("books").doc(t).set(this.data).then(t=>{this.dialogRef.close(this.data),this.loading=!1}).catch(t=>{console.log(t),this.loading=!1,alert("Tidak Dapat Menyimpan Data")})}else this.db.collection("books/").doc(this.data.id).update(this.data).then(t=>{this.dialogRef.close(this.data),this.loading=!1}).catch(t=>{console.log(t),this.loading=!1,alert("Tidak Dapat Mengupdate Data")})}}return t.\u0275fac=function(e){return new(e||t)(i.Ob(g.g),i.Ob(g.a),i.Ob(vp),i.Ob(np.a))},t.\u0275cmp=i.Ib({type:t,selectors:[["app-product-detail"]],decls:24,vars:6,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["appearance","outline",2,"width","100%"],["matInput","",3,"ngModel","ngModelChange"],["mat-dialog-actions","","align","end"],["mat-button","","mat-dialog-close",""],["mat-flat-button","",3,"disabled","click"]],template:function(t,e){1&t&&(i.Ub(0,"h3",0),i.yc(1," Detail Produk "),i.Tb(),i.Ub(2,"div",1),i.Ub(3,"mat-form-field",2),i.Ub(4,"mat-label"),i.yc(5,"Clothes Name"),i.Tb(),i.Ub(6,"input",3),i.bc("ngModelChange",function(t){return e.data.clothesname=t}),i.Tb(),i.Tb(),i.Ub(7,"mat-form-field",2),i.Ub(8,"mat-label"),i.yc(9,"Brand"),i.Tb(),i.Ub(10,"input",3),i.bc("ngModelChange",function(t){return e.data.brand=t}),i.Tb(),i.Tb(),i.Ub(11,"mat-form-field",2),i.Ub(12,"mat-label"),i.yc(13,"Category"),i.Tb(),i.Ub(14,"input",3),i.bc("ngModelChange",function(t){return e.data.category=t}),i.Tb(),i.Tb(),i.Ub(15,"mat-form-field",2),i.Ub(16,"mat-label"),i.yc(17,"Type Of Fabric"),i.Tb(),i.Ub(18,"input",3),i.bc("ngModelChange",function(t){return e.data.typeoffabric=t}),i.Tb(),i.Tb(),i.Tb(),i.Ub(19,"div",4),i.Ub(20,"button",5),i.yc(21,"Batal"),i.Tb(),i.Ub(22,"button",6),i.bc("click",function(){return e.saveData()}),i.yc(23),i.Tb(),i.Tb()),2&t&&(i.Db(6),i.kc("ngModel",e.data.clothesname),i.Db(4),i.kc("ngModel",e.data.brand),i.Db(4),i.kc("ngModel",e.data.category),i.Db(4),i.kc("ngModel",e.data.typeoffabric),i.Db(4),i.kc("disabled",e.loading),i.Db(1),i.zc(e.loading?"Menyimpan..":"Simpan"))},directives:[g.h,g.e,mp.b,mp.e,bp.b,wp.c,wp.j,wp.l,g.c,a.a,g.d],styles:[""]}),t})();var Ip=n("Xa2L"),Ep=n("Wp6s");function Op(t,e){1&t&&(i.Ub(0,"div",2),i.Pb(1,"mat-spinner"),i.Tb())}function Sp(t,e){if(1&t){const t=i.Vb();i.Ub(0,"tr"),i.Pb(1,"td"),i.Ub(2,"td"),i.yc(3),i.Tb(),i.Ub(4,"td"),i.yc(5),i.Tb(),i.Ub(6,"td"),i.yc(7),i.Tb(),i.Ub(8,"td"),i.yc(9),i.Tb(),i.Ub(10,"td"),i.yc(11),i.Tb(),i.Ub(12,"td",7),i.Ub(13,"button",9),i.bc("click",function(){i.rc(t);const n=e.$implicit,r=e.index;return i.fc(2).productDetail(n,r)}),i.yc(14,"Edit"),i.Tb(),i.Ub(15,"button",10),i.bc("click",function(){i.rc(t);const n=e.$implicit,r=e.index;return i.fc(2).DeleteProduct(n.id,r)}),i.yc(16),i.Tb(),i.Tb(),i.Tb()}if(2&t){const t=e.$implicit,n=e.index,r=i.fc(2);i.Db(3),i.zc(n+1),i.Db(2),i.zc(t.clothesname),i.Db(2),i.zc(t.brand),i.Db(2),i.zc(t.category),i.Db(2),i.zc(t.typeoffabric),i.Db(4),i.kc("disabled",r.loadingDelete[n]),i.Db(1),i.zc(r.loadingDelete[n]?"Menghapus..":"Delete")}}function Dp(t,e){if(1&t){const t=i.Vb();i.Ub(0,"mat-card"),i.Ub(1,"mat-card-header"),i.Ub(2,"mat-card-title"),i.yc(3),i.Tb(),i.Tb(),i.Ub(4,"mat-card-content"),i.Ub(5,"div",3),i.Pb(6,"span",4),i.Ub(7,"button",5),i.bc("click",function(){return i.rc(t),i.fc().productDetail({},-1)}),i.yc(8,"Tambah Product"),i.Tb(),i.Tb(),i.Ub(9,"table",6),i.Ub(10,"thead"),i.Pb(11,"th"),i.Ub(12,"th"),i.yc(13,"NO"),i.Tb(),i.Ub(14,"th"),i.yc(15,"Nama Baju"),i.Tb(),i.Ub(16,"th"),i.yc(17,"Merek"),i.Tb(),i.Ub(18,"th"),i.yc(19,"Kategori"),i.Tb(),i.Ub(20,"th"),i.yc(21,"Jenis Kain"),i.Tb(),i.Pb(22,"th",7),i.Tb(),i.Ub(23,"tbody"),i.xc(24,Sp,17,7,"tr",8),i.Tb(),i.Tb(),i.Tb(),i.Tb()}if(2&t){const t=i.fc();i.Db(3),i.zc(t.title),i.Db(21),i.kc("ngForOf",t.books)}}const Ap=[{path:"",component:f,children:[{path:"dashboard",component:d},{path:"images",component:y},{path:"product",component:(()=>{class t{constructor(t,e,n){this.dialog=t,this.auth=e,this.db=n,this.books={},this.userData={},this.loadingDelete={}}ngOnInit(){this.title="Clothes Information",this.auth.user.subscribe(t=>{this.userData=t,this.getBooks()})}getBooks(){this.loading=!0,this.db.collection("books",t=>t.where("uid","==",this.userData.uid)).valueChanges({idField:"id"}).subscribe(t=>{console.log(t),this.books=t,this.loading=!1},t=>{this.loading=!1})}productDetail(t,e){this.dialog.open(Tp,{width:"400px",data:t}).afterClosed().subscribe(t=>{})}DeleteProduct(t,e){confirm("Delete item?")&&this.db.collection("books").doc(t).delete().then(t=>{this.books.splice(e,1),this.loadingDelete[e]=!1}).catch(t=>{this.loadingDelete[e]=!1,alert("Tidak dapat menghapus data")})}}return t.\u0275fac=function(e){return new(e||t)(i.Ob(g.b),i.Ob(np.a),i.Ob(vp))},t.\u0275cmp=i.Ib({type:t,selectors:[["app-product"]],decls:2,vars:2,consts:[["style","height: 300px;","class","uk-flex uk-flex-center uk-flex-middle",4,"ngIf"],[4,"ngIf"],[1,"uk-flex","uk-flex-center","uk-flex-middle",2,"height","300px"],[1,"uk-flex"],[1,"uk-width-expand"],["mat-flat-button","","color","primary",3,"click"],[1,"uk-table","uk-table-middle","uk-table-divider"],["align","right"],[4,"ngFor","ngForOf"],["mat-button","","color","primary",3,"click"],["mat-button","","color","accent",3,"disabled","click"]],template:function(t,e){1&t&&(i.xc(0,Op,2,0,"div",0),i.xc(1,Dp,25,2,"mat-card",1)),2&t&&(i.kc("ngIf",e.loading),i.Db(1),i.kc("ngIf",!e.loading))},directives:[r.k,Ip.b,Ep.a,Ep.c,Ep.e,Ep.b,a.a,r.j],styles:[""]}),t})()},{path:"",pathMatch:"ful",redirectTo:"/admin/dashboard"}]}];let kp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.Mb({type:t}),t.\u0275inj=i.Lb({imports:[[r.c,o.c.forChild(Ap),p.a,wp.f]]}),t})()}}]);